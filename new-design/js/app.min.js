$=null,window.devMode=!1,document.addEventListener("DOMContentLoaded",function(){window.jQuery&&($=jQuery,$.fn.isInViewport=function(){if($(this).offset()){var e=$(this).offset().top,a=e+$(this).outerHeight(),n=$(window).scrollTop(),t=n+$(window).height();return a>n&&e<t}return!1}),app.init()}),window.addEventListener("load",function(){app.formOnLoad()});var availablePlans=[],app={addressAutocompleteKey:"KF52-HM45-TC15-RH34",pixelId:"758451334748699",conditionalTablet:!0,companies:[],dp:[{model:"Apple iPhone SE 64GB",price:"615"},{model:"Apple iPhone SE 128GB",price:"690"},{model:"Apple iPhone SE 256GB",price:"830"},{model:"Apple iPhone XR 64GB",price:"720"},{model:"Apple iPhone 11 Pro Max 64GB",price:"1555"},{model:"Apple iPhone 11 Pro 64GB",price:"1415"},{model:"Apple iPhone 11 64GB",price:"875"},{model:"Apple iPhone 12 Pro Max 128GB",price:"1596"},{model:"Apple iPhone 12 Pro Max 256GB",price:"1740"},{model:"Apple iPhone 12 Pro Max 512GB",price:"2016"},{model:"Apple iPhone 12 Mini 64GB",price:"1008"},{model:"Apple iPhone 12 Mini 128GB",price:"1080"},{model:"Apple iPhone 12 Mini 256GB",price:"1225"},{model:"Apple iPhone 12 Pro 128GB",price:"1440"},{model:"Apple iPhone 12 Pro 256GB",price:"1584"},{model:"Apple iPhone 12 Pro 512GB",price:"1860"},{model:"Apple iPhone 12 64GB",price:"1164"},{model:"Apple iPhone 12 128GB",price:"1236"},{model:"Apple iPhone 12 256GB",price:"1380"},{model:"Google Pixel 5 128GB",price:"950"},{model:"LG Velvet 128GB",price:"750"},{model:"Motorola Edge+ 256GB",price:"2000"},{model:"Samsung A32 5G",price:"435"},{model:"Samsung A52 5G",price:"770"},{model:"Samsung Galaxy Note 20 Ultra 5G 128GB",price:"2250"},{model:"Samsung Galaxy Note 20 Ultra 5G 512GB",price:"2510"},{model:"Samsung Galaxy Note 20 5G 128GB",price:"1730"},{model:"Samsung Galaxy S20 FE 5G 128GB",price:"1200"},{model:"Samsung Galaxy S20 5G 128GB",price:"1650"},{model:"Samsung Galaxy S20+ 5G 128GB",price:"2000"},{model:"Samsung Galaxy S20+ 5G 512GB",price:"2200"},{model:"Samsung Galaxy S20 Ultra 5G 128GB",price:"2300"},{model:"Samsung Galaxy S20 Ultra 5G 512GB",price:"2610"},{model:"Samsung Galaxy S21 5G 128GB",price:"1400"},{model:"Samsung Galaxy S21 5G 256GB",price:"1485"},{model:"Samsung Galaxy S21+ 5G 128GB",price:"1730"},{model:"Samsung Galaxy S21+ 5G 256GB",price:"1820"},{model:"Samsung Galaxy S21 Ultra 5G 128GB",price:"2040"},{model:"Samsung Galaxy S21 Ultra 5G 256GB",price:"2125"},{model:"Samsung Galaxy S21 Ultra 5G 512GB",price:"2335"},{model:"Samsung Galaxy S21 Ultra 5G 512GB",price:"2335"}],data:{pricingType:null,userProvince:null,company:null,province:null,region:null,customerType:null,existingCustomerType:null,phone:null,model:null,plan:null,phoneColor:null,additionalPhone:null,additionalPlan:null,additionalPhoneColor:null},init:function(){"/forms/rpp"!==window.location.pathname&&(window.devMode=!0,$("body").addClass("devMode")),this.initSentry(),this.initGoogleAnalytics(),this.findProvince(),this.getPrices(),this.timeout(),this.lazyLoadImages(),this.setSectionClasses(),this.loadGTranslate(),this.initHomeSection(),this.loadExternalJS(),this.loadExternalCSS(),this.confirmationPageUpdate(),this.accessoriesUpdate(),this.initAdditionalSection(),this.initBillingSection(),this.initUTMParameters(),this.validatePhoneNumber(),this.initOutFunnel(),this.initValidations(),window.devMode&&this.initVerification(),$(document).on("click","div.fsError",function(){$(this).remove()})},initSentry:function(){},initVerification:function(){var e=$('[fs-field-validation-name="Select One Primary ID"] select'),a=$('[fs-field-validation-name="Select One Secondary ID"] select');e.change(function(){a.find("option").removeAttr("disabled"),$(this).val()&&a.find('option[value="'+$(this).val()+'"]').attr("disabled",!0)}),a.change(function(){e.find("option").removeAttr("disabled"),$(this).val()&&e.find('option[value="'+$(this).val()+'"]').attr("disabled",!0)})},initValidations:function(){$('[fs-field-validation-name="Passport Number"] input').on("keyup blur",function(){""!==$(this).val()&&($(this).val().match(/\b[\w]{2}[\d]{6}\b/gm)?$(this).closest(".fsRowBody").removeClass("fsValidationError"):$(this).closest(".fsRowBody").addClass("fsValidationError"))})},initMouseFlow:function(){var e;window._mfq=window._mfq||[],(e=document.createElement("script")).type="text/javascript",e.defer=!0,e.src="//cdn.mouseflow.com/projects/f239c49e-23f3-4e82-8521-da2a0125bd3b.js",document.getElementsByTagName("head")[0].appendChild(e)},initGoogleAnalytics:function(){var e,a,n,t,i,o;e=window,a=document,n="script",t="ga",e.GoogleAnalyticsObject=t,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=a.createElement(n),o=a.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(i,o),ga("create","UA-167773818-2","auto"),ga("send","pageview"),ga("send","event","form","loaded"),$(".fsNextButton").on("click",function(){setTimeout(function(){if(!$("div.fsError:visible").length){let e=$(".fsPage:visible").find(".fsSectionHeading").first().text();ga("send","event","form","navigation",e)}},500)}),$(".fsSubmitButton").on("click",function(){$("div[id^=confirmationPage]").not("[id^=confirmationPageDefault]").is(":visible")&&ga("send","event","form","submit")})},setData:function(e,a){switch(app.data[e]=a,e){case"plan":$('[fs-field-validation-name="Primary plan"] input').val(a),"Bring Own Device"===app.data.phone&&$('[fs-field-validation-name="Primary Phone Color"] input').val("None");break;case"phoneColor":$('[fs-field-validation-name="Primary Phone Color"] input').val(a);break;case"province":"Quebec"===a?app.setData("region","QC"):"Saskatchewan"===a||"Manitoba"===a?app.setData("region","MW"):app.setData("region","NATIONAL");break;case"existingCustomerType":$("form.fsForm").addClass(a);break;case"additionalPhone":"Bring Own Device"!==app.data.additionalPhone&&$('[fs-field-validation-name="Additional Line Phone Color"] input').val("");case"additionalPlan":"Bring Own Device"===app.data.additionalPhone&&$('[fs-field-validation-name="Additional Line Phone Color"] input').val("None");case"pricingType":"CBU PRICING"===a&&$('[fs-field-validation-name="Customer Type - Existing"] label').eq(1).hide()}console.log(app.data)},findProvince:function(){setTimeout(()=>{$.ajax({url:"https://api.ipinfodb.com/v3/ip-city/?key=572ad25b60f79f5ac21a0bb8d8b436ee4d6f1e7d7e424fcc4bbcdeffe51a57aa&format=json",dataType:"jsonp"}).done(e=>{e&&e.regionName,0})})},getPrices:function(){$.getJSON("https://redwireless.s3.ca-central-1.amazonaws.com/data/pricesList.json",function(e){pricing=e.pricing,pricing.forEach(e=>{let a=[];e.groups.forEach(e=>{var n=[],t=[];e.region&&n.push(e.region),e.company&&n.push(e.company);let i=e.plans.split("\n");i&&i.forEach(e=>{t.push(e.trim())}),a.push({include:n,exclude:[],plans:t,planType:e.planType,pricing:e.pricing})}),availablePlans.push({phone:e.phone,tip:e.tip,groups:a})}),app.initPhoneSection()})},timeout:function(){var e=new Date(Date.parse(new Date)+36e5),a=(new Date,!1),n=!1,t=setInterval(function(){var i=function(e){const a=Date.parse(e)-Date.parse(new Date),n=Math.floor(a/1e3%60),t=Math.floor(a/1e3/60%60),i=Math.floor(a/36e5%24),o=Math.floor(a/864e5);return{total:a,days:o,hours:i,minutes:t,seconds:n}}(e);i.minutes<=15&&!n&&(n=!0,alert("Deals will expire on "+e.toLocaleTimeString())),$("#countdown b").html(("0"+i.minutes).slice(-2)+":"+("0"+i.seconds).slice(-2)),e.getTime()<(new Date).getTime()&&(a=!0),(i.seconds<=0&&i.minutes<=0||a)&&($(".fsPagination").hide(),window.location.reload(!0),clearInterval(t))},1e3)},initOutFunnel:function(){var e,a;$(".fsForm").addClass("outfunnel-form"),$('.fsForm input[type="email"]').addClass("outfunnel-input-email"),$(".fsForm .fsNameFirst input").addClass("outfunnel-input-firstname"),$(".fsForm .fsNameLast input").addClass("outfunnel-input-lastname"),window.OFID="5fcba696beed351a6f2ea1d1",e=document.createElement("script"),a="https://cdn.outfunnel.com/c.js?v="+(new Date).toISOString().substring(0,10),e.setAttribute("src",a),document.getElementsByTagName("head")[0].appendChild(e)},loadScript:function(e,a=document.head,n=null){var t=document.createElement("script");t.src=e,n&&(t.onload=n,t.onreadystatechange=n),a.appendChild(t)},formOnLoad:function(){$("#fsLocal").attr("data-state","loaded"),this.setCustomerType();var e=this.urlParam("name-first"),a=this.urlParam("name-last"),n=this.urlParam("contact_phone_number")||this.urlParam("phone_number")||this.urlParam("phone");e&&$(".fsNameFirst input").val(e.replace(/\+/g," ")),a&&$(".fsNameLast input").val(a.replace(/\+/g," ")),n&&(n=(n=n.replace(/\+/g," ")).replace("%2B","+"),$(".fsFormatPhoneCA").val(n)),$('[fs-field-validation-name="Existing Provider"] select').wrap('<span class="notranslate"></span>'),"function"==typeof langChange&&langChange()},loadStyle:function(e){var a=document.createElement("link");a.href=e,a.rel="stylesheet",a.type="text/css",document.head.appendChild(a)},loadExternalJS:function(){this.loadScript("https://chat-assets.frontapp.com/v1/chat.bundle.js",document.body,app.initFrontChat),this.loadScript("https://ws1.postescanada-canadapost.ca/js/addresscomplete-2.30.min.js?key="+this.addressAutocompleteKey,document.body,app.initAddressComplete),this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js",document.body)},loadExternalCSS:function(){this.loadStyle("https://ws1.postescanada-canadapost.ca/css/addresscomplete-2.30.min.css?key="+this.addressAutocompleteKey)},initFrontChat:function(){window.FrontChat("init",{chatId:"a05302496045c20f91cdd812eade85b0",useDefaultLauncher:!0}),$("body").on("click",'#front-chat-holder > div > div[role="button"]',function(){$("body").addClass("chat-open")}),$("body").on("click",'#front-chat-holder > div > div div [role="button"]',function(){$("body").removeClass("chat-open")})},initAddressComplete:function(){$('div[fs-field-type="address"]').each(function(e,a){var n=$(a).find(".fsFieldAddress input").attr("id"),t=[{element:n,field:"",mode:1},{element:n,field:"Line1",mode:2},{element:$(a).find(".fsFieldAddress2 input").attr("id"),field:"Line2",mode:2},{element:$(a).find(".fsFieldCity input").attr("id"),field:"City",mode:2},{element:$(a).find(".fsFieldState select").attr("id"),field:"ProvinceName",mode:2},{element:$(a).find(".fsFieldZip input").attr("id"),field:"PostalCode"}];new pca.Address(t,{key:"KF52-HM45-TC15-RH34"}).listen("populate",function(e){let n=e.Line1.split(" ");n[0]&&-1!==(n=n[0]).indexOf("-")&&(unit=n.split("-"),unit[0]&&(unit=unit[0].trim(),n=e.Line1.replace(unit+"-",""),unit===n.substr(0,unit.length)&&(n=n.replace(unit,"").trim()),$(a).find(".fsFieldAddress input").val(n),$(a).find(".fsFieldAddress2 input").val("Unit "+unit)))})})},accessoriesUpdate:function(){$(".section-accessories .fsProductField").on("click",function(e){var a=$(this).find("select").val();"select"===e.target.nodeName.toLowerCase()||$(e.target).hasClass("fsProductField")||((a=$(this).find("select").val())?a>=1&&a<10&&a++:a=1,$(this).find("select").val(a),a&&$(this).closest(".fsFieldRow").addClass("selected"))}),$(".section-accessories .fsProductField select").on("change",function(){$(this).val()&&"0"!==$(this).val()?$(this).parents(".fsProductField").trigger("click"):setTimeout(()=>{$(this).parents(".fsFieldRow").removeClass("selected")},100)}),$(".phone-cases .fsImageOptionButton").on("click",function(e){if("select"===e.target.nodeName.toLowerCase())return e.preventDefault(),void e.stopPropagation();$(this).find(".fsImageOptionImageSelected").length>0&&(e.preventDefault(),e.stopPropagation()),setTimeout(()=>{var e=$(this).parent().find('input[type="hidden"]').first();e.attr("data-value")||""===e.val()||e.attr("data-value",e.val()),$(this).find("select").val()||$(this).find("select").val(1),$(this).find("select").val()?e.val(e.attr("data-value")+" -- Quantity: "+$(this).find("select").val()):e.val("")},100)}),$(".phone-cases .fsImageOptionButton:not(:first-child)").each(function(e,a){$(a).append('<div class="select-quantity"> <label for="field100587830">Quantity:</label> <select> <option value="" selected="" disabled="">--</option> <option value="0">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5</option> <option value="6">6</option> <option value="7">7</option> <option value="8">8</option> <option value="9">9</option> <option value="10">10</option> </select> </div>')})},initUTMParameters(){var e=this.urlParam("campaign_source"),a=this.urlParam("campaign_term"),n=this.urlParam("campaign_medium"),t=this.urlParam("campaign_content"),i=this.urlParam("campaign_name");$(".fsNextButton").on("click",function(){setTimeout(function(){$(".section-contact-information").closest(".fsPage").is(":visible")&&(e&&$('[fs-field-validation-name="Campaign Source"] input').val(e),a&&$('[fs-field-validation-name="Campaign Term"] input').val(a),n&&$('[fs-field-validation-name="Campaign Medium"] input').val(n),t&&$('[fs-field-validation-name="Campaign Content"] input').val(t),i&&$('[fs-field-validation-name="Campaign Name"] input').val(i))},500)})},validatePhoneNumber:function(){var e=$('.section-transfer-number input[type="tel"]');e.next().hide(),e.on("change blur",function(){setTimeout(()=>{n(this)},200)}),e.keyup(function(){n(this)});var a=$('.section-add-a-line---transfer-a-number input[type="tel"]');function n(e){var a=$(e).val();"(807)"===a.substr(0,5)||"807"===a.substr(0,3)?($(e).attr("aria-invalid","true"),$(e).closest(".fsRowBody").addClass("fsValidationError"),$(e).focus(),$(e).next().show()):$(e).next().hide()}a.next().hide(),a.on("change blur",function(){setTimeout(()=>{n(this)},200)}),a.keyup(function(){n(this)})},confirmationPageUpdate:function(){$(".fsNextButton").on("click",function(){setTimeout(function(){let e=$("div[id^=confirmationPage]").not("[id^=confirmationPageDefault]");if(e.closest(".fsPage").is(":visible")){$('button[alt="DP"]').next("input").prop("checked",!1);var a=app.urlParam("lifeworks_coupon_code");""!==a&&$.ajax({type:"POST",url:"https://hooks.zapier.com/hooks/catch/3790296/o72y76o/",data:{code:a,submissionId:app.urlParam("submissionId"),dateTime:(new Date).toLocaleString("en-CA")}});var n=[];$(".section-addons input:checkbox:checked").each(function(){n.push($(this).val())}),"None"!==app.data.phoneColor&&e.find("#primary-phone-color").html(app.data.phoneColor),e.find("#primary-plan").html(app.data.plan),e.find("#additional-phone").html(app.data.additionalPhone),"None"!==app.data.additionalPhoneColor&&e.find("#additional-phone-color").html(app.data.additionalPhoneColor),e.find("#additional-plan").html(app.data.additionalPlan),e.find(".field.addon-checkbox .value")[0].innerHTML=n.join(" <span>and</span> ");var t=[];$(".page-additional-addons .section-additional-addons input:checkbox:checked").each(function(){t.push($(this).val())}),e.find(".field.addon-checkbox2 .value")[0].innerHTML=t.join(" <span>and</span> "),e.find(".field").each(function(e,a){let n=$(a).find(".value");n.length&&((n=n[0]).innerHTML=n.innerHTML.replace(/&nbsp;/g,"").trim(),""!==n.innerHTML&&"--"!==n.innerHTML&&"0"!==n.innerHTML||$(a).addClass("hide"));var t=$(a).closest(".group");t.length&&$(t).find(".field").length===$(t).find(".field.hide").length&&$(t).addClass("hide")});var i="";app.data.phone&&(i+=app.data.plan+" :: "+app.data.phone+" :: "+app.data.phoneColor),app.data.additionalPhone&&(app.data.phone&&(i+=" / "),i+=app.data.additionalPlan+" :: "+app.data.additionalPhone+" :: "+app.data.additionalPhoneColor),n.length&&(i+=" / "+n.join(" / "));let o=$('[fs-field-validation-name="Device Protection"] input').val();o&&(i+=" / "+o),$(".section-accessories").first().find("select").each(function(){if($(this).val()&&"0"!==$(this).val()){let e=$(this).closest(".fsProductField").find(".fsProductField__info__name").html();i+=" / "+e+" - Qty "+$(this).val()}}),t.length&&(i+=" / "+t.join(" / "));let s=$('[fs-field-validation-name="Add a Line - Device Protection"] input').val();s&&(i+=" / "+s),$(".section-accessories").eq(1).find("select").each(function(){if($(this).val()&&"0"!==$(this).val()){let e=$(this).closest(".fsProductField").find(".fsProductField__info__name").html();i+=" / "+e+" - Qty "+$(this).val()}}),$('[fs-field-validation-name="Products Ordered"] textarea').val(i)}},300)})},lazyLoadImages:function(){$(".fsHiddenPage img").each(function(e){let a=this.src;this.src="data:image/svg+xml,%3Csvg version='1.1' id='loader-1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='40px' height='40px' viewBox='0 0 50 50' style='enable-background:new 0 0 50 50;' xml:space='preserve'%3E%3Cpath fill='%23000' d='M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z'%3E%3CanimateTransform attributeType='xml' attributeName='transform' type='rotate' from='0 25 25' to='360 25 25' dur='0.6s' repeatCount='indefinite'%3E%3C/animateTransform%3E%3C/path%3E%3C/svg%3E",$(this).attr("data-src",a)}),$(".fsPage:not(.fsHiddenPage) + .fsPage img:not(.loaded)").each(function(e){let a=$(this).attr("data-src");a&&($(this).attr("src",a),$(this).addClass("loaded"))}),$(".fsNextButton").on("click",function(){$(".fsPage:not(.fsHiddenPage) + .fsPage img:not(.loaded), .fsPage:not(.fsHiddenPage) + .fsPage + .fsPage img:not(.loaded)").each(function(e){let a=$(this).attr("data-src");a&&($(this).attr("src",a),$(this).addClass("loaded"))}),setTimeout(function(){$(".fsPage:not(.fsHiddenPage) img").each(function(){var e=$(this).attr("data-src");e&&!$(this).hasClass("loaded")&&($(this).attr("src",e),$(this).addClass("loaded"))})},300),setTimeout(function(){$(".section-phone-banners").each(function(){var e=$(this).find(".bannerRow:visible").length;$(this).addClass("banners-"+e)})},300)})},setSectionClasses:function(){$('[fs-field-validation-name="Section Class" i]').each(function(){var e=$(this).find("input").attr("placeholder");$(this).closest(".fsSection").addClass("section-"+e),$(this).closest(".fsPage").addClass("page-"+e)})},loadGTranslate:function(){$(".fsSection").first().prepend("<div id='google_translate_element2'></div>"),$(".fsSection").first().prepend('<div class="gflags"><a href="#" onclick="app.changeLanguage(\'en\');return false;" title="English" class="gflag nturl" style="background-position:-0px -0px;"><img src="//gtranslate.net/flags/blank.png" height="16" width="16" alt="English" /></a><a href="#" onclick="app.changeLanguage(\'fr\');return false;" title="French" class="gflag nturl" style="background-position:-200px -100px;"><img src="//gtranslate.net/flags/blank.png" height="16" width="16" alt="French" /></a></div>');var e=document.createElement("script");e.src="https://translate.google.com/translate_a/element.js?cb=app.googleTranslateElementInit2",e.type="text/javascript",e.onload=function(){},document.getElementsByTagName("head")[0].appendChild(e)},googleTranslateElementInit2:function(){new google.translate.TranslateElement({pageLanguage:"af",autoDisplay:!1},"google_translate_element2"),window.addEventListener("load",function(){setTimeout(function(){var e=$("html").attr("lang");"fr"===e?app.changeLanguage("fr"):"en"===e&&$("#\\:1\\.container").contents().find("#\\:1\\.restore").click()},1e3)})},changeLanguage:function(e){for(var a=document.querySelector("#google_translate_element2 select"),n=0;n<a.children.length;n++){if(a.children[n].value==e){a.selectedIndex=n,a.dispatchEvent(new Event("change"));break}}"fr"===e?$("[fs-field-validation-name=Language] select").val("French").trigger("change"):($("[fs-field-validation-name=Language] select").val("Default").trigger("change"),"en"===e&&$("#\\:1\\.container").contents().find("#\\:1\\.restore").click())},initHomeSection:function(){var e=$("[fs-field-validation-name=Company] input"),a=$('[fs-field-validation-name="Company"] input').val();if(a){var n=$('[fs-field-validation-name="pricing"] select').val();"RPP PRICING"!==n&&"CBU PRICING"!==n||app.setData("pricingType",n),$.ajax({url:"https://northamerica-northeast1-redwireless.cloudfunctions.net/companies"}).done(n=>{app.companies=n,a=a.toUpperCase(),e.val(a);var t=app.companies.find(e=>{if(!e.a)return!1;let n=e.a.map(e=>e.toLowerCase());return!!n.length&&-1!==n.indexOf(a.toLowerCase())});t&&t.alias,-1!==app.companies.map(e=>e.c.toUpperCase()).indexOf(a)?e.val(a):t?(e.val(t.c),a=t.c):e.val("OTHER (COMPANY NOT LISTED)"),a&&(app.setData("company",a),$('[fs-field-validation-name="Company List"] select option').each(function(){if(this.text.toUpperCase().trim()==a.toUpperCase().trim()){var e=this.text;$('[fs-field-validation-name="Company List"] select').val(e),$('[fs-field-validation-name="Company List"] select').trigger("change")}}))})}$(".fsPage").first().addClass("home-section"),$(".home-section label, .section-addline label").mousedown(function(e){1===e.which&&($("#fsLocal").attr("data-state","loading"),setTimeout(()=>{$("#fsLocal").attr("data-state","loaded")},100))}),$('[fs-field-validation-name="Customer Type"] input').change(()=>{app.setCustomerType()}),$('[fs-field-validation-name="Customer Type - Existing"] input').change(function(){var e=$('[fs-field-validation-name="Customer Type - Existing"] input:checked').val();e&&(e=e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),app.setData("existingCustomerType",e),e.match(/discount/gi)&&$('.section-billing input[type="radio"]').prop("checked","checked")),$('.home-section input[value="I would like to upgrade my phone"]').is(":checked")&&$(".section-phones-list .fsImageOptionFieldContainer input").val("").trigger("change")}),$(".home-section [fs-field-validation-name='Which province are you from?'] select").change(function(){app.setData("province",$(this).val()),$(".section-phones-list .fsImageOptionFieldContainer input").trigger("change")}),$(".home-section [fs-field-validation-name='Which province are you from?'] select").val()&&$(".home-section [fs-field-validation-name='Which province are you from?'] select").trigger("change"),app.data.userProvince&&$("[fs-field-validation-name='Which province are you from?'] select").val(app.data.userProvince).trigger("change")},setCustomerType:function(){var e=$('[fs-field-validation-name="Customer Type"] input:checked').val();e&&(e=e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),app.setData("customerType",e))},getPhonePlans:function(e,a=!1){let n=availablePlans.find(a=>a.phone.trim()===e.trim());var t=null;n&&n.tip&&(t=n.tip);let i=n.groups.filter(e=>e.include.includes(app.data.region)),o=[];if(o=i.length>0?i:n.groups.filter(e=>0===e.include.length&&!e.exclude.includes(app.data.region)),app.data.pricingType){var s=o.filter(e=>e.pricing==app.data.pricingType);s&&(o=s)}if(app.data.company){let e=o.filter(e=>e.include.includes(app.data.company));e.length>0&&(o=e)}if(a||$('input[value="I would like to add a line"]').is(":checked")){let e=o.filter(e=>"additional"===e.planType);e.length>0&&(o=e)}var l=jQuery("<div class='plans-list'></div>");o.length>0&&o[0].plans.forEach(e=>{var a=e;if(-1!==a.indexOf("$")){var n=a.indexOf("$"),t=a.slice(0,n),i=a.match(/\$((?:\d|\,)*\.?\d+)/g)||[];i&&(i=i[0]);var o=a.slice(a.indexOf("per month on the")+"per month on the".length,a.length).trim(),s=null;if(-1!==o.indexOf("Bonus")){var d=o.slice(o.lastIndexOf("+"),o.lastIndexOf("Bonus")+5);o=o.slice(0,o.lastIndexOf("+")),s=d.slice(d.lastIndexOf("+")+1,d.indexOf("GB")+2),d=(d=d.replace("+","")).slice(d.indexOf("Bonus"),d.length)}var p=-1!==a.indexOf("UP Front Edge")||-1!==a.indexOf("Upfront Edge");p&&(t=t.slice(t.indexOf("-")+1,t.length).trim());var r=o.slice(0,o.indexOf("GB")+2);o=(o=o.slice(o.indexOf("GB")+2,o.length)).replace("Infinite Plan","Infinite Data Plan");var c=i.slice(0,i.indexOf(".")),f=i.slice(i.indexOf("."),i.length),m=jQuery("<label><div class='box'><input type='radio' name='phone-plans' value='"+e+"'></input></div></label>");tag=m.find(".box"),p?($(m).addClass("upfront"),tag.append('<span class="upfront"><i class="en">Upfront Edge</i><i class="fr notranslate">Voie Express</i><span title="What is Upfront Edge"></span></span>')):"No Term"!==t.trim()&&($(m).addClass("financing"),tag.append('<span class="financing">Financing</span>'));var u="";t.length>=30&&(u="tight"),"No Term"===t.trim()&&(u+=" no-term"),tag.append('<span class="model '+u+'" data-model="'+t+'">'+t+"</span>"),tag.append('<span class="plan"><strong>'+r+"</strong> "+o+"</span>"),d&&(tag.addClass("has-bonus"),tag.append('<span class="bonus"><strong>'+s+" </strong> "+d+"</span>")),o.length>35&&tag.addClass("small-text"),tag.append('<span class="price"><strong>'+c+"</strong><span>"+f+"</span>/mo.</span>"),m.append(tag),l.append(m)}});var d=jQuery("<div class='plans-list-wrapper'></div>");return o.length>0?d.prepend(l):d.prepend('<p class="no-pricing">No Pricing available for the selected device</p>'),t&&d.append("<div class='tip'>"+t+"</div>"),d},initPhoneSection:function(){$(".page-phones-list").first().find(".section-phones-list .fsImageOptionFieldContainer input").trigger("change"),$(".page-phones-list").first().find(".section-phones-list .fsImageOptionFieldContainer .fsOptionLabel").wrap('<span class="notranslate"></span>'),$(".page-phones-list").first().find(".section-phone-colors .fsRowBody legend span").addClass("notranslate"),$('[fs-field-validation-name="Additional Line Phone"] select').on("change",function(){e(this,!0)}),$(".page-phones-list").find(".section-phones-list .fsImageOptionFieldContainer input").on("change",function(){e(this)}),$(".page-phones-list").on("click",".plans-list .box .upfront span",function(e){e.preventDefault(),$("p.upfront-edge-agreement").modal()}),$(".section-plans-list").on("click",".plans-list > label",function(){$(".plans-list > label").removeClass("selected"),$(this).addClass("selected")});function e(e,a=!1){if($(".page-contact-information").is(":visible"))return;var n=$(e).closest(".fsPage"),t=$(e).val().trim();if(!t)return;n.attr("id")===$(".page-phones-list").first().attr("id")?(app.setData("phone",t),app.setData("plan",null),"Bring Own Device"===app.data.phone?app.setData("phoneColor","None"):app.setData("phoneColor","")):(app.setData("additionalPhone",t),app.setData("additionalPlan",null),"Bring Own Device"===t?app.setData("additionalPhoneColor","None"):app.setData("additionalPhoneColor","")),n.find(".section-plans-list .phone-plans").hide(),n.find('.section-phone-colors .fsRowBody legend span:contains(" - ")').closest(".fsRow").hide(),n.find('.section-phone-colors .fsRowBody legend span:contains(" - ")').closest(".fsRow").find("input").val("");let i=$("x.phone-color-row");n.find(".section-phone-colors .fsRowBody legend span").each(function(){$(this).text().trim().includes(t+" - ")&&(i=$(this).closest(".fsRow"))}),i.show(),i.find(".fsImageOptionFieldContainer button").length&&n.find('.section-plans-list .fsRowBody legend span:contains(" - ")').closest("fieldset").find("input").val(""),n.find('.upfront-edge-agreement-text, [fs-field-validation-name="Agreement"]').hide(),n.find('.upfront-edge-agreement-text, [fs-field-validation-name="Agreement"]').closest(".fsRow").hide(),n.find(".upfront-edge-agreement-text input").removeClass("fsRequired");let o=app.getPhonePlans(t,a);n.find(".plans-list-wrapper").length>0?n.find(".plans-list-wrapper").html(o.html()):n.find(".section-plans-list").prepend(o[0].outerHTML),n.find(".plans-list-wrapper .plans-list label").length&&!0,$("html, body").animate({scrollTop:n.find(".section-phone-colors").offset().top},500,function(){i.find(".fsImageOptionFieldContainer button").first().trigger("click")})}function a(e){var a=$(e).closest(".fsPage"),n=$('.plans-list input[type="radio"]:checked').siblings(".model").data("model");!n||-1===n.indexOf("Apple iPhone 12 64GB")&&-1===n.indexOf("Apple iPhone 12 128GB")?$('[fs-field-validation-name="Apple iPhone 12 - Color "] button[aria-label="Red"]').show():$('[fs-field-validation-name="Apple iPhone 12 - Color "] button[aria-label="Red"]').hide();var t=".page-addons";if(a.attr("id")===$(".page-phones-list").first().attr("id")?app.setData("plan",$(e).val()):(app.setData("additionalPlan",$(e).val()),t=".page-additional-addons"),n){app.setData("model",n.trim());let e=app.dp.find(e=>e.model===n.trim());if(e){let a=null,n=parseInt(e.price,10),i=null;n>0&&n<600?(a=6.99,i="https://s3.amazonaws.com/files.formstack.com/public/874862/image_MWNat699v.2.png","QC"===app.data.region&&(i="https://s3.amazonaws.com/files.formstack.com/public/874862/image_QC699v.2.png")):n>=600&&n<800?(a=8.99,i="https://s3.amazonaws.com/files.formstack.com/public/874862/image_MWNat899v.2.png","QC"===app.data.region&&(i="https://s3.amazonaws.com/files.formstack.com/public/874862/image_QC899v.2.png")):n>=800&&n<1500?(a=15.99,i="https://s3.amazonaws.com/files.formstack.com/public/874862/image_MWNat1599v.2.png","QC"===app.data.region&&(a=12.99,i="https://s3.amazonaws.com/files.formstack.com/public/874862/image_QC1299v.2.png.png")):n>=1500&&n<=3e3&&(a=18.99,i="https://s3.amazonaws.com/files.formstack.com/public/874862/image_MWNat1899v.2.png","QC"===app.data.region&&(a=15.99,i="https://s3.amazonaws.com/files.formstack.com/public/874862/image_QC1599v.png")),$(t+' button[alt="DP"]').show(),$(t+' button[alt="DP"] label').html("Premium Device Protection $"+a+"/mo."),$(t+" button[alt='DP'] > div").css("background-image","url("+i+")")}else $(t+' button[alt="DP"]').hide()}else $(t+' button[alt="DP"]').hide();if($('[fs-field-validation-name="Agreement"]').closest(".fsRow").addClass("upfront-edge-agreement-text"),$(e).prop("checked")&&$(e).closest(".upfront").length>0?(a.find('.upfront-edge-agreement-text, [fs-field-validation-name="Agreement"]').show(),a.find('.upfront-edge-agreement-text, [fs-field-validation-name="Agreement"]').closest(".fsRow").show(),a.find(".upfront-edge-agreement-text").find(".fsRowBody").show(),a.find(".upfront-edge-agreement-text input").addClass("fsRequired").prop("checked",!1)):(a.find('.upfront-edge-agreement-text, [fs-field-validation-name="Agreement"]').hide(),a.find('.upfront-edge-agreement-text, [fs-field-validation-name="Agreement"]').closest(".fsRow").hide(),a.find(".upfront-edge-agreement-text input").removeClass("fsRequired")),app.conditionalTablet){var i=parseInt(a.find(".section-plans-list").find(".plans-list input:checked").closest(".box").find(".plan strong").text().split(" ")[0],10),o=$('.home-section input[value="NEW Rogers Customer"]').is(":checked"),s=$('.home-section input[value="I would like to upgrade my phone"]').is(":checked");isNaN(i)||i<25||!o&&!s?(a.attr("id")===$(".page-phones-list").first().attr("id")&&($(".page-addons .section-addons input:checkbox").removeAttr("checked"),$(".page-addons .section-addons .fsImageOptionImageSelected").removeClass("fsImageOptionImageSelected").addClass("fsImageOptionImage")),$(".page-addons .section-addons .fsImageOptionButton").each((e,a)=>{-1===$(a).find(".fsOptionLabel").text().indexOf("Huawei")&&-1===$(a).find(".fsOptionLabel").text().indexOf("ZTE Grand X")||($(a).addClass("disabled"),0===$(a).find("span.error").length&&$(a).append("<span class='error'>Tablet Offer is only available for Data Plans of 25GB or greater.</span>"))})):$(".page-addons .section-addons .disabled").removeClass("disabled");var l=parseInt($(".page-additional-phone").find(".plans-list input:checked").closest(".box").find(".plan strong").text().split(" ")[0],10);$(".page-addons .fsImageOptionFieldContainer input").val();var d=$(".page-addons .fsImageOptionFieldContainer input:checked").val(),p=!1;!d||-1===d.indexOf("Huawei")&&-1===d.indexOf("ZTE Grand X")||(p=!0),isNaN(l)||l<25||p?(a.attr("id")!==$(".page-phones-list").first().attr("id")&&($(".page-additional-addons input:checkbox").removeAttr("checked"),$(".page-additional-addons .fsImageOptionImageSelected").removeClass("fsImageOptionImageSelected").addClass("fsImageOptionImage")),$(".page-additional-addons .fsImageOptionButton").each((e,a)=>{-1===$(a).find(".fsOptionLabel").text().indexOf("Huawei")&&-1===$(a).find(".fsOptionLabel").text().indexOf("ZTE Grand X")||($(a).addClass("disabled"),p&&$(a).addClass("fsHidden"),0===$(a).find("span.error").length&&$(a).append("<span class='error'>Tablet Offer is only available for Data Plans of 25GB or greater.</span>"))})):$(".page-additional-addons .disabled").removeClass("disabled fsHidden")}}$(".page-phones-list").first().find(".section-phones-list .fsImageOptionFieldContainer input").trigger("change"),$(".page-phones-list").on("click",".plans-list label",function(e,a=!1){!1,a&&!0}),$(".page-phones-list").on("change",".plans-list input",function(){a(this)}),$(".page-additional-phone").on("change",".plans-list input",function(){a(this)}),$(".page-additional-phone").on("change",".upfront-edge-agreement input",function(){$(this).prop("checked")&&$(this).removeClass("fsRequired")}),$(".page-additional-phone").on("click",".upfront-edge-agreement label",function(e){e.target===this&&$(this).find("input").trigger("click")}),$('.section-addons button[alt="DP"], .section-additional-addons button[alt="DP"]').next("input").on("change",function(){if($(this).is(":checked")){let e=$(this).prev().find(".fsOptionLabel").html();$(this).closest(".fsSection").find('[fs-field-validation-name="Device Protection"] input').val(e),$(this).closest(".fsSection").find('[fs-field-validation-name="Add a Line - Device Protection"] input').val(e)}else $(this).closest(".fsSection").find('[fs-field-validation-name="Device Protection"] input').val(""),$(this).closest(".fsSection").find('[fs-field-validation-name="Add a Line - Device Protection"] input').val("")}),$('.section-additional-phone [fs-field-validation-name="Additional Line Phone Color"] input').change(function(){app.setData("additionalPhoneColor",$(this).val())}),$(".page-phones-list .section-phone-colors .fsImageOptionFieldContainer input").change(function(){app.setData("phoneColor",$(this).val())});var n=$(".phone-plans-list label").length,t="columns-2";1===n?t="columns-1":3===n&&(t="columns-3"),$(".phone-plans-list").addClass(t);var i=".section-phone-banners";$(i).find('[fs-field-type="richtext"] img').each(function(){$(this).attr("src").match(/upfront/gi)||$(this).attr("data-src").match(/upfront/gi)?$(this).closest(".fsRow").addClass("upfront-sample"):$(this).closest(".fsRow").addClass("bannerRow")}),$(i).find('[fs-field-type="richtext"] table').each(function(){$(this).closest(".fsRow").addClass("bannerRow")}),app.conditionalTablet&&($(".section-addons .fsImageOptionButton").click(function(){if("true"===$(this).attr("aria-checked"))return!0;var e=!0,a=0,n=-1!==$(this).find(".fsOptionLabel").text().indexOf("Huawei")||-1!==$(this).find(".fsOptionLabel").text().indexOf("ZTE Grand X");return $(".section-addons .fsImageOptionFieldContainer").find("input:checked").each(function(){-1===$(this).val().indexOf("Huawei")&&-1===$(this).val().indexOf("ZTE Grand X")||a++}),a>0&&n&&(alert("Only one tablet per customer account is allowed"),e=!1),e}),$(".page-additional-addons .fsImageOptionButton").click(function(){if("true"===$(this).attr("aria-checked"))return!0;var e=!0,a=0,n=-1!==$(this).find(".fsOptionLabel").text().indexOf("Huawei")||-1!==$(this).find(".fsOptionLabel").text().indexOf("ZTE Grand X");return $(".page-additional-addons .fsImageOptionFieldContainer").find("input:checked").each(function(){-1===$(this).val().indexOf("Huawei")&&-1===$(this).val().indexOf("ZTE Grand X")||a++}),a>0&&n&&(alert("Only one tablet per customer account is allowed"),e=!1),e}))},initAdditionalSection:function(){$('.section-addline input, [fs-field-validation-name="Customer Type - Existing"] input , [fs-field-validation-name="Which province are you from?"] select').change(function(){if("Yes"===$(".section-addline input:checked").val()||"I would like to add a line"===$('[fs-field-validation-name="Customer Type - Existing"] input:checked').val()){var e=$(".page-phones-list").clone();e.find('[fs-field-validation-name="Primary plan"], [fs-field-validation-name="Primary Phone Color"]').closest(".fsRow").remove(),e.find("button").prop("type","button"),e.find(".fsImageOptionImageSelected").removeClass("fsImageOptionImageSelected").addClass("fsImageOptionImage"),e.find(".fsImageOptionFieldContainer input").val("").removeClass("fsRequired"),e.find(".fsSectionHeader").remove(),e.find(".section-phone-banners").first().remove(),e.find('[fs-field-validation-name="Agreement"]').closest(".fsRow").addClass("upfront-edge-agreement"),e.find(".byod-not-available").closest(".fsRow").hide(),e.find('button[alt="Bring Own Device"]').addClass("enabled"),e.find("*").each(function(){$(this).attr("name")&&$(this).attr("name",$(this).attr("name")+"_clone"),$(this).attr("id")&&$(this).attr("id",$(this).attr("id")+"_clone"),$(this).attr("aria-checked")&&$(this).attr("aria-checked","false"),$(this).removeAttr("fs-field-type"),$(this).removeAttr("fs-field-validation-name")}),e.html(e.html().replace("Primary Line","Additional Line")),0===$(".section-additional-phone .addtional-phone-wrapper").length?$(".section-additional-phone").append('<div class="addtional-phone-wrapper">'+e.html()+"</div>"):$(".section-additional-phone .addtional-phone-wrapper").html(e.html());var a=$(".section-additional-phone .section-phones-list"),n=$(".section-additional-phone .section-plans-list");a.find(".fsImageOptionButton").click(function(){a.find(".fsImageOptionImageSelected").removeClass("fsImageOptionImageSelected").addClass("fsImageOptionImage"),$(this).find(".fsImageOptionImage").addClass("fsImageOptionImageSelected").removeClass("fsImageOptionImage").closest("button").addClass("selected"),$('.section-additional-phone [fs-field-validation-name="Additional Line Phone"] select').val($(this).find(".fsOptionLabel").text()),$('.section-additional-phone [fs-field-validation-name="Additional Line Phone"] select').trigger("change"),"Bring Own Device"===$(this).find(".fsOptionLabel").text()&&$('[fs-field-validation-name="Primary Phone Color"] input').val("None")}),a.find(".fsImageOptionButton").first().trigger("click");var t=$(".section-phone-colors");t.find(".fsImageOptionButton").click(function(){t.find(".fsImageOptionImageSelected").removeClass("fsImageOptionImageSelected").addClass("fsImageOptionImage"),$(this).find(".fsImageOptionImage").addClass("fsImageOptionImageSelected").removeClass("fsImageOptionImage").closest("button").addClass("selected"),$('.section-additional-phone [fs-field-validation-name="Additional Line Phone Color"] input').val($(this).find(".fsOptionLabel").text()),$('.section-additional-phone [fs-field-validation-name="Additional Line Phone Color"] input').trigger("change")}),n.on("click",".plans-list label",function(){n.find(".plans-list label").removeClass("selected"),$(this).addClass("selected"),$('.section-additional-phone [fs-field-validation-name="Additional Line Plan"] input').val($(this).find("input").val()),$('.section-additional-phone [fs-field-validation-name="Additional Line Plan"] input').trigger("change")});$(".section-addons fieldset");t.find(".fsImageOptionButton").first().trigger("click"),"I would like to add a line"===$('[fs-field-validation-name="Customer Type - Existing"] input:checked').val()&&($('[fs-field-validation-name="Primary plan"] input').val(""),app.data.phone=null,app.data.phoneColor=null,app.data.plan=null)}else app.data.additionalPhone=null,app.data.additionalPhoneColor=null,app.data.additionalPlan=null})},initBillingSection:function(){$(".fsNextButton").on("click",function(){$(".section-billing").is(":visible")&&($('.section-billing input[type="checkbox"]').closest(".fsRowBody").removeClass("fsValidationError"),$('.section-billing input[type="checkbox"]').length===$('.section-billing input[type="checkbox"]:checked').length?($('.section-billing input[type="radio"]').prop("checked","checked"),$('.section-billing input[type="radio"]').closest(".fsRowBody").hasClass("fsValidationError")):($('.section-billing input[type="radio"]').removeAttr("checked"),$('.section-billing input[type="radio"]').closest(".fsRowBody").hasClass("fsValidationError")&&setTimeout(()=>{$('.section-billing input[type="checkbox"]').closest(".fsRowBody").hasClass("fsValidationError")||$('.section-billing input[type="checkbox"]').closest(".fsRowBody").addClass("fsValidationError")},100)))})},urlParam:function(e){var a=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==a?null:decodeURI(a[1])||0}};
//# sourceMappingURL=app.min.js.map