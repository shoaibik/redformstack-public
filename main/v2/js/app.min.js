$=null,window.devMode=!1,document.addEventListener("DOMContentLoaded",function(){window.jQuery&&($=jQuery),app.init()}),window.addEventListener("load",function(){app.formOnLoad()});var app={addressAutocompleteKey:"KF52-HM45-TC15-RH34",pixelId:"758451334748699",conditionalTablet:!0,init:function(){var e,t;"/forms/rpp"!==window.location.pathname&&(window.devMode=!0),this.timeout(),this.initHomeSection(),this.initFBPixel(),this.lazyLoadImages(),this.setSectionClasses(),this.loadExternalJS(),this.loadExternalCSS(),this.confirmationPageUpdate(),this.accessoriesUpdate(),this.initPhoneSection(),this.initBillingSection(),this.initUTMParameters(),this.validatePhoneNumber(),$(".fsForm").addClass("outfunnel-form"),$('.fsForm input[type="email"]').addClass("outfunnel-input-email"),$(".fsForm .fsNameFirst input").addClass("outfunnel-input-firstname"),$(".fsForm .fsNameLast input").addClass("outfunnel-input-lastname"),window.OFID="5fcba696beed351a6f2ea1d1",e=document.createElement("script"),t="https://cdn.outfunnel.com/c.js?v="+(new Date).toISOString().substring(0,10),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)},timeout:function(){var e=new Date(Date.parse(new Date)+36e5),t=(new Date,!1);$(".topBar").append('<span id="countdown" style="float: right; color: #fff; text-transform: none; font-size: 14px;"></span>');var n=!1,i=setInterval(function(){var a=function(e){const t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),i=Math.floor(t/1e3/60%60),a=Math.floor(t/36e5%24),s=Math.floor(t/864e5);return{total:t,days:s,hours:a,minutes:i,seconds:n}}(e);a.minutes<=15&&!n&&(n=!0,alert("Deals will expire on "+e.toLocaleTimeString())),$("#countdown").html("Deals expires in "+("0"+a.minutes).slice(-2)+":"+("0"+a.seconds).slice(-2)),e.getTime()<(new Date).getTime()&&(t=!0),(a.seconds<=0&&a.minutes<=0||t)&&($(".fsPagination").hide(),window.location.reload(!0),clearInterval(i))},1e3)},loadScript:function(e,t=document.head,n=null){var i=document.createElement("script");i.src=e,n&&(i.onload=n,i.onreadystatechange=n),t.appendChild(i)},formOnLoad:function(){document.querySelector(".fsSubmit.fsPagination")||(document.querySelector("#rw-form-load-error").style.display="block");$(".inline-loading").hide(),this.setCustomerType();var e=$('[fs-field-validation-name="Company"] input').val();e&&$('[fs-field-validation-name="Company Old"] select').val(e);var t=this.urlParam("name-first"),n=this.urlParam("name-last"),i=this.urlParam("contact_phone_number")||this.urlParam("phone_number")||this.urlParam("phone");t&&$(".fsNameFirst input").val(t.replace(/\+/g," ")),n&&$(".fsNameLast input").val(n.replace(/\+/g," ")),i&&(i=(i=i.replace(/\+/g," ")).replace("%2B","+"),$(".fsFormatPhoneCA").val(i)),$('[fs-field-validation-name="Existing Provider"] select').wrap('<span class="notranslate"></span>')},loadStyle:function(e){var t=document.createElement("link");t.href=e,t.rel="stylesheet",t.type="text/css",document.head.appendChild(t)},loadExternalJS:function(){this.loadScript("https://chat-assets.frontapp.com/v1/chat.bundle.js",document.body,app.initFrontChat),this.loadScript("https://ws1.postescanada-canadapost.ca/js/addresscomplete-2.30.min.js?key="+this.addressAutocompleteKey,document.body,app.initAddressComplete)},loadExternalCSS:function(){this.loadStyle("https://ws1.postescanada-canadapost.ca/css/addresscomplete-2.30.min.css?key="+this.addressAutocompleteKey)},initFrontChat:function(){window.FrontChat("init",{chatId:"3bcc16b171ba8a7c32db3e0481fbec16",useDefaultLauncher:!0}),$("body").on("click",'#front-chat-holder > div > div[role="button"]',function(){$("body").addClass("chat-open")}),$("body").on("click",'#front-chat-holder > div > div div [role="button"]',function(){$("body").removeClass("chat-open")})},initAddressComplete:function(){$('div[fs-field-type="address"]').each(function(e,t){var n=$(t).find(".fsFieldAddress input").attr("id"),i=[{element:n,field:"",mode:1},{element:n,field:"Line1",mode:2},{element:$(t).find(".fsFieldAddress2 input").attr("id"),field:"Line2",mode:2},{element:$(t).find(".fsFieldCity input").attr("id"),field:"City",mode:2},{element:$(t).find(".fsFieldState select").attr("id"),field:"ProvinceName",mode:2},{element:$(t).find(".fsFieldZip input").attr("id"),field:"PostalCode"}];new pca.Address(i,{key:"KF52-HM45-TC15-RH34"}).listen("populate",function(e){let n=e.Line1.split(" ");n[0]&&-1!==(n=n[0]).indexOf("-")&&(unit=n.split("-"),unit[0]&&(unit=unit[0].trim(),n=e.Line1.replace(unit+"-",""),unit===n.substr(0,unit.length)&&(n=n.replace(unit,"").trim()),$(t).find(".fsFieldAddress input").val(n),$(t).find(".fsFieldAddress2 input").val("Unit "+unit)))})})},accessoriesUpdate:function(){$(".phone-accessories-section .fsProductField").on("click",function(e){var t=$(this).find("select").val();"select"!==e.target.nodeName.toLowerCase()&&((t=$(this).find("select").val())?t>=1&&t<10&&t++:t=1,$(this).find("select").val(t),t&&$(this).closest(".fsFieldRow").addClass("selected"))}),$(".phone-accessories-section .fsProductField select").on("change",function(){$(this).val()&&"0"!==$(this).val()?$(this).parents(".fsProductField").trigger("click"):setTimeout(()=>{$(this).parents(".fsFieldRow").removeClass("selected")},100)}),$(".phone-case-section .fsImageOptionButton").on("click",function(e){if("select"===e.target.nodeName.toLowerCase())return e.preventDefault(),void e.stopPropagation();$(this).find(".fsImageOptionImageSelected").length>0&&(e.preventDefault(),e.stopPropagation()),setTimeout(()=>{var e=$(this).parent().find('input[type="hidden"]').first();e.attr("data-value")||""===e.val()||e.attr("data-value",e.val()),$(this).find("select").val()||$(this).find("select").val(1),$(this).find("select").val()?e.val(e.attr("data-value")+" -- Quantity: "+$(this).find("select").val()):e.val("")},100)}),$(".phone-case-section .fsImageOptionButton:not(:first-child)").each(function(e,t){$(t).append('<div class="select-quantity"> <label for="field100587830">Quantity:</label> <select> <option value="" selected="" disabled="">--</option> <option value="0">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5</option> <option value="6">6</option> <option value="7">7</option> <option value="8">8</option> <option value="9">9</option> <option value="10">10</option> </select> </div>')})},initUTMParameters(){var e=this.urlParam("campaign_source"),t=this.urlParam("campaign_term"),n=this.urlParam("campaign_medium"),i=this.urlParam("campaign_content"),a=this.urlParam("campaign_name");$(".fsNextButton").on("click",function(){setTimeout(function(){$(".section-contact-information").closest(".fsPage").is(":visible")&&(e&&$('[fs-field-validation-name="Campaign Source"] input').val(e),t&&$('[fs-field-validation-name="Campaign Term"] input').val(t),n&&$('[fs-field-validation-name="Campaign Medium"] input').val(n),i&&$('[fs-field-validation-name="Campaign Content"] input').val(i),a&&$('[fs-field-validation-name="Campaign Name"] input').val(a))},500)})},validatePhoneNumber:function(){var e=$('.section-transfer-a-number input[type="tel"]');e.next().hide(),e.on("change blur",function(){setTimeout(()=>{n(this)},200)}),e.keyup(function(){n(this)});var t=$('.section-add-a-line---transfer-a-number input[type="tel"]');function n(e){var t=$(e).val();"(807)"===t.substr(0,5)||"807"===t.substr(0,3)?($(e).attr("aria-invalid","true"),$(e).closest(".fsRowBody").addClass("fsValidationError"),$(e).focus(),$(e).next().show()):$(e).next().hide()}t.next().hide(),t.on("change blur",function(){setTimeout(()=>{n(this)},200)}),t.keyup(function(){n(this)})},confirmationPageUpdate:function(){$(".fsNextButton").on("click",function(){setTimeout(function(){let e=$("div[id^=confirmationPage]").not("[id^=confirmationPageDefault]");if(e.closest(".fsPage").is(":visible")){var t=[];$(".styled-checkbox-section input:checkbox:checked").each(function(){t.push($(this).val())}),e.find(".field.addon-checkbox .value")[0].innerHTML=t.join(" <span>and</span> "),e.find(".field").each(function(e,t){let n=$(t).find(".value");n.length&&((n=n[0]).innerHTML=n.innerHTML.replace(/&nbsp;/g,"").trim(),""!==n.innerHTML&&"--"!==n.innerHTML&&"0"!==n.innerHTML||$(t).addClass("hide"));var i=$(t).closest(".group");i.length&&$(i).find(".field").length===$(i).find(".field.hide").length&&$(i).addClass("hide")})}},500)})},lazyLoadImages:function(){$(".fsHiddenPage img").each(function(e){let t=this.src;this.src="data:image/svg+xml,%3Csvg version='1.1' id='loader-1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='40px' height='40px' viewBox='0 0 50 50' style='enable-background:new 0 0 50 50;' xml:space='preserve'%3E%3Cpath fill='%23000' d='M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z'%3E%3CanimateTransform attributeType='xml' attributeName='transform' type='rotate' from='0 25 25' to='360 25 25' dur='0.6s' repeatCount='indefinite'%3E%3C/animateTransform%3E%3C/path%3E%3C/svg%3E",$(this).attr("data-src",t)}),$(".fsPage:not(.fsHiddenPage) + .fsPage img:not(.loaded)").each(function(e){let t=$(this).attr("data-src");t&&($(this).attr("src",t),$(this).addClass("loaded"))}),$(".fsNextButton").on("click",function(){$(".fsPage:not(.fsHiddenPage) + .fsPage img:not(.loaded), .fsPage:not(.fsHiddenPage) + .fsPage + .fsPage img:not(.loaded)").each(function(e){let t=$(this).attr("data-src");t&&($(this).attr("src",t),$(this).addClass("loaded"))}),setTimeout(function(){$(".fsPage:not(.fsHiddenPage) img").each(function(){var e=$(this).attr("data-src");e&&!$(this).hasClass("loaded")&&($(this).attr("src",e),$(this).addClass("loaded"))})},300)})},setSectionClasses:function(){$(".fsSectionHeading").each(function(e,t){var n=$(t).closest(".fsSection");t=t.innerHTML.trim().toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),n.addClass("section-"+t)}),$('div[fs-field-validation-name="phone accessories section"]').closest(".fsSection").addClass("phone-accessories-section"),$('div[fs-field-validation-name="available addon section"]').closest(".fsSection").addClass("styled-checkbox-section"),$('div[fs-field-validation-name="phone case section"]').closest(".fsSection").addClass("phone-case-section")},initHomeSection:function(){$(".fsPage").first().addClass("home-section"),$('[fs-field-validation-name="Customer Type"]').append('<span class="inline-loading">Please wait...</span>'),$('[fs-field-validation-name="Customer Type"]').addClass("customer-type"),$('[fs-field-validation-name="Customer Type - Existing"]').addClass("existing"),$(".home-section").bind("DOMSubtreeModified",function(e){e.target.innerHTML.length>0&&$(".home-section").removeClass("loading")});var e=this;$('[fs-field-validation-name="Customer Type"] input').change(function(){e.setCustomerType()}),$('[fs-field-validation-name="Customer Type - Existing"] input').change(function(){var e=$('[fs-field-validation-name="Customer Type - Existing"] input:checked').val();e&&(e=e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),$("form.fsForm").attr("data-type",e))}),$('[fs-field-validation-name="Customer Type - Existing"] input').change(function(){$('[fs-field-validation-name="Customer Type - Existing"] input:checked').val().match(/discount/gi)&&$('.section-billing-information input[type="radio"]').prop("checked","checked")})},setCustomerType:function(){var e=$('[fs-field-validation-name="Customer Type"] input:checked').val();e&&(e=e.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),$("form.fsForm").removeClass("existing-rogers-customer new-rogers-customer"),$("form.fsForm").addClass(e))},initFBPixel:function(){var e,t,n,i,a,s;e=window,t=document,n="script",e.fbq||(i=e.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},e._fbq||(e._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.agent="redformstack",i.queue=[],(a=t.createElement(n)).async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js",(s=t.getElementsByTagName(n)[0]).parentNode.insertBefore(a,s));var o=window.location.href,l=new URL(o).searchParams.get("company");l&&""!=l&&!1===window.devMode&&(fbq("set","autoConfig",!1,this.pixelId),fbq("init",this.pixelId),fbq("track","Lead"))},initPhoneSection:function(){var e=this.conditionalTablet;jQuery(document).ready(function(t){var n=".section-which-phone-are-you-interested-in",i=".section-choose-your-plan---primary-line",a=".section-choose-your-plan---add-a-line";t(i+" .fsOptionLabel, "+a+" .fsOptionLabel").each((e,n)=>{var i=n.innerText;if(-1!==i.indexOf("$")){var a=t(n).closest(".fsRow");a.hasClass("phone-plans")||a.addClass("phone-plans"),t(n).contents().filter(function(){return 3===this.nodeType}).remove();e=i.indexOf("$");var s=i.slice(0,e),o=i.match(/\$((?:\d|\,)*\.?\d+)/g)||[];o&&(o=o[0]);var l=i.slice(i.indexOf("per month on the")+"per month on the".length,i.length).trim(),d=null;if(-1!==l.indexOf("+ BONUS")){var r=l.slice(l.indexOf("+ BONUS"),l.lastIndexOf("GB")+2);l=l.slice(0,l.indexOf("+ BONUS")),d=r.slice(r.indexOf("+ BONUS")+"+ BONUS".length,r.indexOf("GB")+2),r=(r=r.replace("+","")).slice(0,r.indexOf("BONUS")+"BONUS".length)}var c=-1!==i.indexOf("UP Front Edge")||-1!==i.indexOf("Upfront Edge");c&&(s=s.slice(s.indexOf("-")+1,s.length).trim());var f=l.slice(0,l.indexOf("GB")+2);l=(l=l.slice(l.indexOf("GB")+2,l.length)).replace("Infinite Plan","Infinite Data Plan");var p=o.slice(0,o.indexOf(".")),u=o.slice(o.indexOf("."),o.length),h=jQuery("<div class='box'></div>");c&&(t(n).addClass("upfront"),h.append('<span class="upfront">Upfront Edge</span>'));var m="";s.length>=30&&(m="tight"),"No Term"===s.trim()&&(m+=" no-term"),h.append('<span class="model '+m+'">'+s+"</span>"),h.append('<span class="plan"><strong>'+f+"</strong> "+l+"</span>"),r&&(h.addClass("has-bonus"),h.append('<span class="bonus">'+r+" <strong>"+d+"</strong></span>")),l.length>35&&h.addClass("small-text"),h.append('<span class="price"><strong>'+p+"</strong><span>"+u+"</span>/mo.</span>"),t(n).append(h)}}),t(".phone-plans").each((e,n)=>{var i=t(n).find(".box").length,a="columns-2";1===i?a="columns-1":3===i&&(a="columns-3"),t(n).find(".fieldset-content").addClass(a)}),t(i+", "+a).find('[fs-field-type="richtext"] img').each(function(){t(this).attr("src").match(/upfront/gi)||t(this).attr("data-src").match(/upfront/gi)?t(this).closest(".fsRow").addClass("upfront-sample"):t(this).closest(".fsRow").addClass("bannerRow")}),t(i+", "+a).find('[fs-field-type="richtext"] table').each(function(){t(this).closest(".fsRow").addClass("bannerRow")}),t(n+", .section-what-phone-are-you-interested-in").find('[fs-field-type="richtext"] img').each(function(){t(this).closest(".fsRow").addClass("bannerRow")}),t(n+", .section-what-phone-are-you-interested-in").find(".fsImageOptionFieldContainer button").on("click",function(){setTimeout(function(){t(i+":visible, "+a+":visible").length&&t("html, body").animate({scrollTop:t(i+":visible, "+a+":visible").offset().top},500)},50)}),t(i+", "+a).find("input[type=radio]").on("click",function(){setTimeout(()=>{t(this).closest(".fsRow").next(".fsRow:not(.fsHidden)").find(".fsImageOptionFieldContainer").isInViewport()||t("html, body").animate({scrollTop:t(this).closest(".phone-plans").next().offset().top},500)},100)}),t(".phone-plans .fieldset-content label.fsOptionLabel.vertical input").on("change",function(){if(t(this).prop("checked")&&t(this).parent().hasClass("upfront")?(t('.upfront-edge-agreement, [fs-field-validation-name="Agreement"]').show(),t("[fs-field-validation-name=Agreement] input").addClass("fsRequired").prop("checked",!1)):(t('.upfront-edge-agreement, [fs-field-validation-name="Agreement"]').hide(),t("[fs-field-validation-name=Agreement] input").removeClass("fsRequired")),e){var n=parseInt(t(i).find(".phone-plans:visible input:checked").next().find(".plan strong").text().split(" ")[0],10),s=t('.home-section input[value="NEW Rogers Customer"]').is(":checked"),o=t('.home-section input[value="I would like to upgrade my phone"]').is(":checked");isNaN(n)||n<25||!s&&!o?t(".section-available-add-ons .fsImageOptionButton").each((e,n)=>{-1===t(n).find(".fsOptionLabel").text().indexOf("Huawei")&&-1===t(n).find(".fsOptionLabel").text().indexOf("ZTE Grand X")||(t(n).addClass("disabled"),0===t(n).find("span.error").length&&t(n).append("<span class='error'>Tablet Offer is only available for Data Plans of 25GB or greater.</span>"))}):t(".section-available-add-ons .disabled").removeClass("disabled");var l=parseInt(t(a).find(".phone-plans:visible input:checked").next().find(".plan strong").text().split(" ")[0],10);isNaN(l)||l<25?t(".section-available-add-ons---add-a-line .fsImageOptionButton").each((e,n)=>{-1===t(n).find(".fsOptionLabel").text().indexOf("Huawei")&&-1===t(n).find(".fsOptionLabel").text().indexOf("ZTE Grand X")||(t(n).addClass("disabled"),0===t(n).find("span.error").length&&t(n).append("<span class='error'>Tablet Offer is only available for Data Plans of 25GB or greater.</span>"))}):t(".section-available-add-ons---add-a-line .disabled").removeClass("disabled")}}),e&&t(".styled-checkbox-section .fsImageOptionButton").click(function(){if("true"===t(this).attr("aria-checked"))return!0;var e=!0,n=0,i=-1!==t(this).find(".fsOptionLabel").text().indexOf("Huawei")||-1!==t(this).find(".fsOptionLabel").text().indexOf("ZTE Grand X");return t(".styled-checkbox-section .fsImageOptionFieldContainer").find("input:checked").each(function(){-1===t(this).val().indexOf("Huawei")&&-1===t(this).val().indexOf("ZTE Grand X")||n++}),n>0&&i&&(alert("Only one tablet per customer account is allowed"),e=!1),e}),t.fn.isInViewport=function(){if(t(this).offset()){var e=t(this).offset().top,n=e+t(this).outerHeight(),i=t(window).scrollTop(),a=i+t(window).height();return n>i&&e<a}return!1}})},initBillingSection:function(){$(".fsNextButton").on("click",function(){$(".section-billing-information").is(":visible")&&($('.section-billing-information input[type="checkbox"]').closest(".fsRowBody").removeClass("fsValidationError"),$('.section-billing-information input[type="checkbox"]').length===$('.section-billing-information input[type="checkbox"]:checked').length?($('.section-billing-information input[type="radio"]').prop("checked","checked"),$('.section-billing-information input[type="radio"]').closest(".fsRowBody").hasClass("fsValidationError")):($('.section-billing-information input[type="radio"]').removeAttr("checked"),$('.section-billing-information input[type="radio"]').closest(".fsRowBody").hasClass("fsValidationError")&&setTimeout(()=>{$('.section-billing-information input[type="checkbox"]').closest(".fsRowBody").hasClass("fsValidationError")||$('.section-billing-information input[type="checkbox"]').closest(".fsRowBody").addClass("fsValidationError")},100)))})},urlParam:function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:decodeURI(t[1])||0}};
//# sourceMappingURL=app.min.js.map