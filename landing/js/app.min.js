function closeModal(){$.modal.close(),$('.open-referrer, img[alt^="Refer-Friends-Banner"]').off("click",openIframe).removeClass("open-referrer")}document.addEventListener("DOMContentLoaded",function(){if(null===document.querySelector("#fsSubmissionCheckmark")){$=jQuery,$(".fsForm").addClass("outfunnel-form"),$('.fsForm input[type="email"]').addClass("outfunnel-input-email"),$(".fsForm .fsNameFirst input").addClass("outfunnel-input-firstname"),$(".fsForm .fsNameLast input").addClass("outfunnel-input-lastname"),window.OFID="5fcba696beed351a6f2ea1d1",function(){var e=document.createElement("script"),t="https://cdn.outfunnel.com/c.js?v="+(new Date).toISOString().substring(0,10);e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}();var e=window.location.href,t=new URL(e),a=t.searchParams.get("Employee")||t.searchParams.get("e"),n=!!t.searchParams.get("landing");a&&void 0!==$("[fs-field-validation-name=Employee] select option[value='"+a+"']").val()?$("[fs-field-validation-name=Employee] select").val(a):a?$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(a.toUpperCase())&&(a=this.text,$("[fs-field-validation-name=Employee] select").val(a))}):(a=window.location.pathname.replace("/",""),$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(a.toUpperCase())&&(a=this.text,$("[fs-field-validation-name=Employee] select").val(a))}));var o=$("[fs-field-validation-name=Company] input");o.length||(o=$("[fs-field-validation-name=Entreprise] input"));var i,s="OTHER (COMPANY NOT LISTED)",r=t.searchParams.get("Company")||t.searchParams.get("c")||t.searchParams.get("company");if(r){r=r.toUpperCase();var l=companyAlias.find(e=>e.alias.toLowerCase()===r.toLowerCase()),d="";l&&(d=l.alias),-1!==companies.indexOf(r)?o.val(r):l?(o.val(l.name),r=l.name):o.val(s);let e=$('[data-company="'+encodeURI(r)+'"], [data-company="'+r+'"], [data-company="'+d+'"]');e.length&&(e.show(),e.closest(".fsSection").addClass("company-image"))}$(".fsSubmitButton").on("click",function(){setTimeout(()=>{if(-1===companies.indexOf(o.val().toUpperCase()))o.val(s);else{r=o.val().toUpperCase(),$("[data-company]").hide();let e=$('[data-company="'+encodeURI(r)+'"], [data-company="'+r+'"]');e.length&&(e.show(),e.closest(".fsSection").addClass("company-image"))}},100)}),o.autocomplete({delay:0,minLength:1e3,autoFocus:!0,source:function(e,t){var a=jQuery.ui.autocomplete.filter(companies,e.term),n=new Fuse(companies,{includeScore:!0,minMatchCharLength:3,threshold:.25,ignoreLocation:!0});let o=companies.find(t=>{if(t.match(/\b([A-Z])/g).join("").trim()==e.term.trim())return!0});o&&(e.term=e.term+" | "+o),resultsOriginal=n.search(e.term),(0===(a=(a=resultsOriginal.map(e=>e.item.toUpperCase())).slice(0,20)).length||resultsOriginal[0].score>.025)&&a.push(s),t(a)},select:function(e,t){o.autocomplete("disable")},close:function(e,t){o.autocomplete("option","minLength",1e3)}}),o.keypress(function(e){10!=e.which&&13!=e.which||(o.closest(".fsRowBody").find("button").trigger("click"),e.preventDefault()),13!==e.which&&o.autocomplete("disable")}),o.closest(".fsRowBody").on("click","button",function(){o.autocomplete("enable"),o.autocomplete("option","minLength",3),o.autocomplete("search",o.val())}),o.autocomplete("disable"),o.after("<button type='button'>Search</button>"),o.attr("autocomplete","none");var c=jQuery.ajaxSettings.xhr;$.ajaxSettings.xhr=function(){return i=c()},$(".fsForm").on("submit",function(e){if($("#thanks").length>0&&(o.val()===s||"SKIPTHEDISHES COURIER"===o.val())){e.preventDefault();var t=(l=$(this)).attr("action"),r="";a&&"Red Logistics"!==a&&(r="?Employee="+$("[fs-field-validation-name=Employee] select").val()),$.ajax({type:"POST",url:t,data:l.serialize(),success:function(e,t,a){"SKIPTHEDISHES COURIER"===o.val()?window.location.href="https://www.redwireless.ca/courier"+r:window.location.href=i.responseURL},error:function(){"SKIPTHEDISHES COURIER"===o.val()?window.location.href="https://www.redwireless.ca/courier"+r:window.location.href=i.responseURL}}),o.val()===s&&$("#thanks").modal(),setTimeout(function(){$(".fsSubmitButton").val("Loading Offers...").attr("disabled","disabled")},200)}if(n){e.preventDefault();var l;t=(l=$(this)).attr("action"),r="";a&&"Red Logistics"!==a&&(r="?Employee="+$("[fs-field-validation-name=Employee] select").val()),$.ajax({type:"POST",url:t,data:l.serialize(),success:function(e,t,a){m(i.responseURL)},error:function(){m(i.responseURL)}})}});var f=document.createElement("script");f.src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js",document.body.appendChild(f),openIframe=function(){var e=$(this).attr("alt"),t="";if(e){var n=e.split("--");n[1]&&(t="#googtrans(en|"+n[1].split(".")[0]+")")}$("<iframe src='https://sellcell.formstack.com/forms/referrals?Employee="+a+t+"'></iframe>").appendTo("body").modal()},$('.open-referrer, img[alt^="Refer-Friends-Banner"]').on("click",openIframe),$("#referrer-form").length>0&&($(".fsRow").each((e,t)=>{$(t).find('input[type="tel"]').length>0&&($("body").addClass("referrer"),$(t).addClass("friend"))}),$(".friend").slice(2).hide(),$(".friend:last").after('<button type="button" class="fsSubmitButton" id="add-friend">Add up to 4 more</button>'),$("#add-friend").on("click",function(){$(".friend:hidden:first").show(),0==$(".friend:hidden").length?($("#add-friend").attr("disabled",!0),$("#add-friend").attr("style","background: #ccc !important"),$("#add-friend").html("Only 5 friends can be referred")):$("#add-friend").html("Add up to "+$(".friend:hidden").length+" more")})),n&&($("body").addClass("landing"),$(".fsSubmitButton").val("Check if you Qualify"))}else setTimeout(function(){window.parent&&window.parent.closeModal()},2e3);function m(e){$(".fsPagination").after('<p style=" color: #dd2d1d; max-width: 536px; margin: auto; margin-top: 23px; font-weight: bold; ">Congratulations you qualified. You will be automatically redirected to secure page in few seconds. If this does not work <a href="'+e+'" target="_parent">click here</a></p>'),setTimeout(()=>{window.top.location.href=e},3e3)}});
//# sourceMappingURL=app.min.js.map