function closeModal(){$.modal.close(),$('.open-referrer, img[alt^="Refer-Friends-Banner"]').off("click",openIframe).removeClass("open-referrer")}document.addEventListener("DOMContentLoaded",function(){$=jQuery;var e="https://redwireless.s3.ca-central-1.amazonaws.com/data/companies-list.json",t={},a=$('form input[name="form"]').val().toString();"4270738"===a&&(e="https://redwireless.s3.ca-central-1.amazonaws.com/data/perks-companies-list.json");var n,o,i=!0,s="Submit";$.ajax({url:e}).done(e=>{var o,r=[];if("4270738"===a?(o=e.cbu.concat(e.rpp),t.cbu=e.cbu,t.rpp=e.rpp):(o=e.companies,r=e.companyAlias),null===document.querySelector("#fsSubmissionCheckmark")){$(".fsForm").addClass("outfunnel-form"),$('.fsForm input[type="email"]').addClass("outfunnel-input-email"),$(".fsForm .fsNameFirst input").addClass("outfunnel-input-firstname"),$(".fsForm .fsNameLast input").addClass("outfunnel-input-lastname"),window.OFID="5fcba696beed351a6f2ea1d1",n=document.createElement("script"),d="https://cdn.outfunnel.com/c.js?v="+(new Date).toISOString().substring(0,10),n.setAttribute("src",d),document.getElementsByTagName("head")[0].appendChild(n);var l=window.location.href,d=new URL(l),c=d.searchParams.get("Employee")||d.searchParams.get("e"),f=!!d.searchParams.get("landing");c&&void 0!==$("[fs-field-validation-name=Employee] select option[value='"+c+"']").val()?$("[fs-field-validation-name=Employee] select").val(c):c?$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(c.toUpperCase())&&(c=this.text,$("[fs-field-validation-name=Employee] select").val(c))}):(c=window.location.pathname.replace("/",""),$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(c.toUpperCase())&&(c=this.text,$("[fs-field-validation-name=Employee] select").val(c))}));var m=$("[fs-field-validation-name=Company] input");m.length||(m=$("[fs-field-validation-name=Entreprise] input"));var p,u="OTHER (COMPANY NOT LISTED)",h=d.searchParams.get("Company")||d.searchParams.get("c")||d.searchParams.get("company");if(h){h=h.toUpperCase();var v=r.find(e=>e.alias.toLowerCase()===h.toLowerCase()),g="";v&&(g=v.alias),-1!==o.indexOf(h)?m.val(h):v?(m.val(v.name),h=v.name):m.val(u);let e=$('[data-company="'+encodeURI(h)+'"], [data-company="'+h+'"], [data-company="'+g+'"]');e.length&&(e.show(),e.closest(".fsSection").addClass("company-image"))}$(".fsSubmitButton").on("mouseup",function(){if(-1===o.indexOf(m.val().toUpperCase()))setTimeout(()=>{m.closest(".fsRowBody").addClass("fsValidationError")},200),i=!1,s=$(this).val(),m.closest(".fsRowBody").find("button").trigger("click"),$('[fs-field-validation-name="pricing"] input').length>0&&$('[fs-field-validation-name="pricing"] input').val("");else{h=m.val().toUpperCase(),$("[data-company]").hide();let e=$('[data-company="'+encodeURI(h)+'"], [data-company="'+h+'"]');e.length&&(e.show(),e.closest(".fsSection").addClass("company-image"))}}),m.autocomplete({delay:0,minLength:1e3,autoFocus:!0,source:function(e,t){var a=jQuery.ui.autocomplete.filter(o,e.term),n=new Fuse(o,{includeScore:!0,minMatchCharLength:3,threshold:.25,ignoreLocation:!0});let i=o.find(t=>{if(t.match(/\b([A-Z])/g).join("").trim()==e.term.trim())return!0});i&&(e.term=e.term+" | "+i),resultsOriginal=n.search(e.term),(0===(a=(a=resultsOriginal.map(e=>e.item.toUpperCase())).slice(0,20)).length||resultsOriginal[0].score>.025||a.length<3)&&a.push(u),t(a)},select:function(e,t){m.autocomplete("disable"),i=!0},close:function(e,t){m.autocomplete("option","minLength",1e3)}}),m.keypress(function(e){10!=e.which&&13!=e.which||(m.closest(".fsRowBody").find("button").trigger("click"),e.preventDefault()),13!==e.which&&m.autocomplete("disable")}),m.closest(".fsRowBody").on("click","button",function(){m.autocomplete("enable"),m.autocomplete("option","minLength",3),m.autocomplete("search",m.val())}),m.autocomplete("disable"),m.after("<button type='button'>Search</button>"),m.attr("autocomplete","none");var y=jQuery.ajaxSettings.xhr;$.ajaxSettings.xhr=function(){return p=y()},$(".fsForm").on("submit",function(e){if(!1===i&&(e.preventDefault(),setTimeout(function(){$(".fsSubmitButton").val(s)},100)),"4270738"===a&&"SKIPTHEDISHES COURIER"!==(h=m.val().toUpperCase())&&(-1!==t.rpp.indexOf(h)?$('[fs-field-validation-name="pricing"] input').val("RPP PRICING"):-1!==t.cbu.indexOf(h)&&$('[fs-field-validation-name="pricing"] input').val("CBU PRICING")),$("#thanks").length>0&&(m.val()===u||"SKIPTHEDISHES COURIER"===m.val())){e.preventDefault();var n=(r=$(this)).attr("action"),o="";c&&"Red Logistics"!==c&&(o="?Employee="+$("[fs-field-validation-name=Employee] select").val()),$.ajax({type:"POST",url:n,data:r.serialize(),success:function(e,t,a){"SKIPTHEDISHES COURIER"===m.val()?window.location.href="https://www.redwireless.ca/courier"+o:window.location.href=p.responseURL},error:function(){"SKIPTHEDISHES COURIER"===m.val()?window.location.href="https://www.redwireless.ca/courier"+o:window.location.href=p.responseURL}}),m.val()===u&&$("#thanks").modal(),setTimeout(function(){$(".fsSubmitButton").val("Loading Offers...").attr("disabled","disabled")},200)}if(f){e.preventDefault();var r;n=(r=$(this)).attr("action"),o="";c&&"Red Logistics"!==c&&(o="?Employee="+$("[fs-field-validation-name=Employee] select").val()),$.ajax({type:"POST",url:n,data:r.serialize(),success:function(e,t,a){b(p.responseURL)},error:function(){b(p.responseURL)}})}});var w=document.createElement("script");w.src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js",document.body.appendChild(w),openIframe=function(){var e=$(this).attr("alt"),t="";if(e){var a=e.split("--");a[1]&&(t="#googtrans(en|"+a[1].split(".")[0]+")")}$("<iframe src='https://sellcell.formstack.com/forms/referrals?Employee="+c+t+"'></iframe>").appendTo("body").modal()},$('.open-referrer, img[alt^="Refer-Friends-Banner"]').on("click",openIframe),$("#referrer-form").length>0&&($(".fsRow").each((e,t)=>{$(t).find('input[type="tel"]').length>0&&($("body").addClass("referrer"),$(t).addClass("friend"))}),$(".friend").slice(2).hide(),$(".friend:last").after('<button type="button" class="fsSubmitButton" id="add-friend">Add up to 4 more</button>'),$("#add-friend").on("click",function(){$(".friend:hidden:first").show(),0==$(".friend:hidden").length?($("#add-friend").attr("disabled",!0),$("#add-friend").attr("style","background: #ccc !important"),$("#add-friend").html("Only 5 friends can be referred")):$("#add-friend").html("Add up to "+$(".friend:hidden").length+" more")})),f&&($("body").addClass("landing"),$(".fsSubmitButton").val("Check if you Qualify"))}else setTimeout(function(){window.parent&&window.parent.closeModal()},2e3);function b(e){$(".fsPagination").after('<p style=" color: #dd2d1d; max-width: 536px; margin: auto; margin-top: 23px; font-weight: bold; ">Congratulations you qualified. You will be automatically redirected to secure page in few seconds. If this does not work <a href="'+e+'" target="_parent">click here</a></p>'),setTimeout(()=>{window.top.location.href=e},3e3)}})});
//# sourceMappingURL=app.min.js.map