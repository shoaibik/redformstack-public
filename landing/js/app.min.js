function closeModal(){$.modal.close(),$('.open-referrer, img[alt^="Refer-Friends-Banner"]').off("click",openIframe).removeClass("open-referrer")}document.addEventListener("DOMContentLoaded",function(){$=jQuery,$("form.fsForm").addClass("loading");var e=$(".fsSection").first();e.find("img").each(function(){$(this).attr("data-src",$(this).attr("src")),$(this).attr("src","")}),$(window).load(function(){$("form.fsForm").removeClass("loading"),e.find("img").each(function(){$(this).attr("src",$(this).attr("data-src"))})});var t,a,i={},n=$('form input[name="form"]').val().toString(),r=!0,o="Submit",s=!1,l=window.location.href,d=new URL(l),c=[];$.ajax({url:"https://northamerica-northeast1-redwireless.cloudfunctions.net/companies"}).done(l=>{if("4270738"===n?(c=l.filter(e=>1===e.l),!0===document.URL.endsWith("pricing")&&(c=l),i.cbu=l.filter(e=>"CBU"===e.t&&1===e.l),i.rpp=l.filter(e=>"RPP"===e.t&&1===e.l),i.direct=l.filter(e=>"Direct"===e.t).map(e=>e.c.toUpperCase())):c=l.filter(e=>"RPP"===e.t),!0===document.URL.endsWith("pricing")&&($("input:not(#field106380166)").removeClass("fsRequired"),$("input:not(#field106380166)").closest(".fsRow").addClass("fsHidden")),null===document.querySelector("#fsSubmissionCheckmark")){$(".fsForm").addClass("outfunnel-form"),$('.fsForm input[type="email"]').addClass("outfunnel-input-email"),$(".fsForm .fsNameFirst input").addClass("outfunnel-input-firstname"),$(".fsForm .fsNameLast input").addClass("outfunnel-input-lastname"),window.OFID="5fcba696beed351a6f2ea1d1",t=document.createElement("script"),a="https://cdn.outfunnel.com/c.js?v="+(new Date).toISOString().substring(0,10),t.setAttribute("src",a),document.getElementsByTagName("head")[0].appendChild(t);var f=d.searchParams.get("Employee")||d.searchParams.get("e"),m=!!d.searchParams.get("landing");f&&void 0!==$("[fs-field-validation-name=Employee] select option[value='"+f+"']").val()?$("[fs-field-validation-name=Employee] select").val(f):f?$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(f.toUpperCase())&&(f=this.text,$("[fs-field-validation-name=Employee] select").val(f))}):(f=window.location.pathname.replace("/",""),$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(f.toUpperCase())&&(f=this.text,$("[fs-field-validation-name=Employee] select").val(f))})),$("[fs-field-validation-name=Employee] select").trigger("change");var p=d.searchParams.get("uqd"),u=$('[fs-field-validation-name="LifeWorks Coupon Code"] input');u.val(p),u.change(function(){s=!1,""!=(p=$(this).val())&&(u.removeClass("correct invalid").addClass("verifing"),$.ajax({type:"POST",url:"https://northamerica-northeast1-redwireless.cloudfunctions.net/sheets/coupons",data:{coupon:p},success:function(e,t,a){u.removeClass("verifing"),"available"===e.result?(s=!0,u.addClass("correct"),u.closest(".fsRowBody").removeClass("fsValidationError")):(s=!1,u.addClass("invalid"),u.closest(".fsRowBody").addClass("fsValidationError"))}}))}),p&&u.length>0&&u.trigger("change");var h=$("[fs-field-validation-name=Company] input");h.length||(h=$("[fs-field-validation-name=Entreprise] input"));var v="OTHER (COMPANY NOT LISTED)",g=d.searchParams.get("Company")||d.searchParams.get("c")||d.searchParams.get("company");if(g){g=g.toUpperCase();var C=c.find(e=>{if(!e.a)return!1;let t=e.a.map(e=>e.toLowerCase());return!!t.length&&-1!==t.indexOf(g.toLowerCase())});C&&C.alias,-1!==c.map(e=>e.c.toUpperCase()).indexOf(g)?h.val(g):C?(h.val(C.c),g=C.c):h.val(v);var w=['[data-company="'+encodeURI(g)+'"]','[data-company="'+g+'"]'];if(C){C.a.map(e=>e.toLowerCase()).forEach(e=>{w.push('[data-company="'+encodeURI(e.toLowerCase())+'"]')})}let e=$(w.join(","));e.length&&(e.attr("src",e.attr("data-src")),e.show(),e.closest(".fsSection").addClass("company-image"))}else e.find("img:visible").attr("src",e.find("img:visible").attr("data-src"));$(".fsSubmitButton").on("mouseup",function(){-1===c.map(e=>e.c.toUpperCase()).indexOf(h.val().toUpperCase())&&(setTimeout(()=>{h.closest(".fsRowBody").addClass("fsValidationError")},200),r=!1,o=$(this).val(),h.closest(".fsRowBody").find("button").trigger("click"),$('[fs-field-validation-name="pricing"] input').length>0&&$('[fs-field-validation-name="pricing"] input').val(""))});var y=3,O=1e3;if(!0===document.URL.endsWith("pricing")){y=1;O=1}h.autocomplete({delay:0,minLength:O,autoFocus:!0,source:function(e,t){var a=jQuery.ui.autocomplete.filter(c,e.term),i=new Fuse(c,{includeScore:!0,minMatchCharLength:y,threshold:.25,useExtendedSearch:!0,ignoreLocation:!0,keys:["c","a"]});e.term=e.term.toUpperCase();let n=null;-1===e.term.indexOf("BC ")&&-1===e.term.indexOf(" BC")||(n=e.term.replace("BC","BRITISH COLUMBIA")),-1===e.term.indexOf("AB ")&&-1===e.term.indexOf(" AB")||(n=e.term.replace("AB","ALBERTA")),-1===e.term.indexOf("SK ")&&-1===e.term.indexOf(" SK")||(n=e.term.replace("SK","SASKATCHEWAN")),-1===e.term.indexOf("MB ")&&-1===e.term.indexOf(" MB")||(n=e.term.replace("MB","MANITOBA")),-1===e.term.indexOf("ON ")&&-1===e.term.indexOf(" ON")||(n=e.term.replace("ON","MANITOBA")),-1===e.term.indexOf("PEI ")&&-1===e.term.indexOf(" PEI")||(n=e.term.replace("PEI","PRINCE EDWARD ISLAND")),-1===e.term.indexOf("NS ")&&-1===e.term.indexOf(" NS")||(n=e.term.replace("NS","NOVA SCOTIA")),-1===e.term.indexOf("NFLD ")&&-1===e.term.indexOf(" NFLD")||(n=e.term.replace("NFLD","NEWFOUNDLAND"));var r=c.find(t=>{if(!t.a)return!1;let a=t.a.map(e=>e.toLowerCase());return!!a.length&&-1!==a.indexOf(e.term.trim().toLowerCase())});r&&(e.term=e.term+" | "+r.c),n||(n=c.find(t=>{if(t.c.match(/\b([A-Z])/g)&&t.c.match(/\b([A-Z])/g).join("").trim()==e.term.trim())return!0})),n&&(e.term=e.term+" | "+n),console.log(e.term),resultsOriginal=i.search(e.term),(0===(a=(a=resultsOriginal.map(e=>e.item.c.toUpperCase())).slice(0,20)).length||resultsOriginal[0].score>.025||a.length<3)&&a.push(v),t(a)},select:function(e,t){h.autocomplete("disable"),r=!0;var a=h.val().toUpperCase();$("[data-company]").hide();let i=$('[data-company="'+encodeURI(a)+'"], [data-company="'+a+'"]');i.length?(i.attr("src",i.attr("data-src")),i.show(),i.closest(".fsSection").addClass("company-image")):$(".fsSection").removeClass("company-image")},close:function(e,t){!1===document.URL.endsWith("pricing")&&h.autocomplete("option","minLength",1e3)}}),h.keypress(function(e){10!=e.which&&13!=e.which||(h.closest(".fsRowBody").find("button").trigger("click"),e.preventDefault()),13!==e.which&&!1===document.URL.endsWith("pricing")&&h.autocomplete("disable")}),h.closest(".fsRowBody").on("click","button",function(){h.autocomplete("enable"),h.autocomplete("option","minLength",3),h.autocomplete("search",h.val())}),!1===document.URL.endsWith("pricing")?h.autocomplete("disable"):h.autocomplete("option","minLength",1),h.after("<button type='button'>Search</button>"),h.attr("autocomplete","none"),$(".fsForm").on("submit",function(e){"4168329"===n&&(r=!0),!1===document.URL.endsWith("pricing")&&!1===r&&(e.preventDefault(),setTimeout(function(){$(".fsSubmitButton").val(o)},100));var t=d.searchParams.get("utm_source"),a=d.searchParams.get("utm_term"),l=d.searchParams.get("utm_medium"),c=d.searchParams.get("utm_content"),p=d.searchParams.get("utm_campaign");if("4270738"===n&&(a="LifeWorks"),t&&$('[fs-field-validation-name="Campaign Source"] input').val(t),a&&$('[fs-field-validation-name="Campaign Term"] input').val(a),l&&$('[fs-field-validation-name="Campaign Medium"] input').val(l),c&&$('[fs-field-validation-name="Campaign Content"] input').val(c),p&&$('[fs-field-validation-name="Campaign Name"] input').val(p),"4270738"===n&&(!1===document.URL.endsWith("pricing")&&!1===s&&(e.preventDefault(),u.closest(".fsRowBody").addClass("fsValidationError"),u.focus(),setTimeout(function(){$(".fsSubmitButton").val(o)},100)),"SKIPTHEDISHES COURIER"!==(g=h.val().toUpperCase())&&(-1!==i.rpp.map(e=>e.c.toUpperCase()).indexOf(g)?$('[fs-field-validation-name="pricing"] input').val("RPP PRICING"):-1!==i.cbu.map(e=>e.c.toUpperCase()).indexOf(g)&&$('[fs-field-validation-name="pricing"] input').val("CBU PRICING"))),!0===document.URL.endsWith("pricing")&&""!==h.val())return e.preventDefault(),void(window.location.href="http://sellcell.formstack.com/forms/rpp?company="+h.val()+"&pricing="+$('[fs-field-validation-name="pricing"] input').val());if($("#thanks").length>0&&(h.val()===v||"SKIPTHEDISHES COURIER"===h.val()||i.direct&&-1!==i.direct.indexOf(h.val().toUpperCase()))){e.preventDefault();var C,w=(R=$(this)).attr("action"),y="";f&&"Red Logistics"!==f&&(y="?Employee="+$("[fs-field-validation-name=Employee] select").val());var O=jQuery.ajaxSettings.xhr;$.ajaxSettings.xhr=function(){return C=O()},$.ajax({type:"POST",url:w,data:R.serialize(),success:function(e,t,a){"SKIPTHEDISHES COURIER"===h.val()?window.location.href="https://www.redwireless.ca/courier"+y:i.direct&&-1!==i.direct.indexOf(h.val().toUpperCase())?window.location.href="https://www.redwireless.ca/direct"+y:C.responseURL?window.location.href=C.responseURL:window.location.href="https://sellcell.formstack.com/forms/rpp?Company="+h.val().toUpperCase()},error:function(e,t,a){"SKIPTHEDISHES COURIER"===h.val()?window.location.href="https://www.redwireless.ca/courier"+y:i.direct&&-1!==i.direct.indexOf(h.val().toUpperCase())?window.location.href="https://www.redwireless.ca/direct"+y:C.responseURL?window.location.href=C.responseURL:window.location.href="https://sellcell.formstack.com/forms/rpp?Company="+h.val().toUpperCase()}}),h.val()===v&&$("#thanks").modal(),setTimeout(function(){$(".fsSubmitButton").val("Loading Offers...").attr("disabled","disabled")},200)}if(m){e.preventDefault();var R;w=(R=$(this)).attr("action"),y="";f&&"Red Logistics"!==f&&(y="?Employee="+$("[fs-field-validation-name=Employee] select").val()),$.ajax({type:"POST",url:w,data:R.serialize(),success:function(e,t,a){S(C.responseURL)},error:function(){S(C.responseURL)}})}});var R=document.createElement("script");R.src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js",document.body.appendChild(R),openIframe=function(){var e=$(this).attr("alt"),t="";if(e){var a=e.split("--");a[1]&&(t="#googtrans(en|"+a[1].split(".")[0]+")")}$("<iframe src='https://sellcell.formstack.com/forms/referrals?Employee="+f+t+"'></iframe>").appendTo("body").modal()},$('.open-referrer, img[alt^="Refer-Friends-Banner"]').on("click",openIframe),$("#referrer-form").length>0&&($(".fsRow").each((e,t)=>{$(t).find('input[type="tel"]').length>0&&($("body").addClass("referrer"),$(t).addClass("friend"))}),$(".friend").slice(2).hide(),$(".friend:last").after('<button type="button" class="fsSubmitButton" id="add-friend">Add up to 4 more</button>'),$("#add-friend").on("click",function(){$(".friend:hidden:first").show(),0==$(".friend:hidden").length?($("#add-friend").attr("disabled",!0),$("#add-friend").attr("style","background: #ccc !important"),$("#add-friend").html("Only 5 friends can be referred")):$("#add-friend").html("Add up to "+$(".friend:hidden").length+" more")})),m&&($("body").addClass("landing"),$(".fsSubmitButton").val("Check if you Qualify"))}else setTimeout(function(){window.parent&&window.parent.closeModal()},2e3);function S(e){$(".fsPagination").after('<p style=" color: #dd2d1d; max-width: 536px; margin: auto; margin-top: 23px; font-weight: bold; ">Congratulations you qualified. You will be automatically redirected to secure page in few seconds. If this does not work <a href="'+e+'" target="_parent">click here</a></p>'),setTimeout(()=>{window.top.location.href=e},3e3)}})});
//# sourceMappingURL=app.min.js.map