function closeModal(){$.modal.close(),$('.open-referrer, img[alt^="Refer-Friends-Banner"]').off("click",openIframe).removeClass("open-referrer")}document.addEventListener("DOMContentLoaded",function(){$=jQuery,$("form.fsForm").addClass("loading");var e=$(".fsSection").first();e.find("img").each(function(){$(this).attr("data-src",$(this).attr("src")),$(this).attr("src","")}),$(window).load(function(){$("form.fsForm").removeClass("loading"),e.find("img").each(function(){$(this).attr("src",$(this).attr("data-src"))})});var t="https://redwireless.s3.ca-central-1.amazonaws.com/data/companies-list.json",a={},n=$('form input[name="form"]').val().toString();"4270738"===n&&(t="https://redwireless.s3.ca-central-1.amazonaws.com/data/perks-companies-list.json");var i,o,s=!0,r="Submit";$.ajax({url:t}).done(t=>{var o,l=[];if("4270738"===n){var d=["RBC INSURANCE","BANK OF MONTREAL","TORONTO DOMINION"];o=t.cbu.concat(t.rpp).concat(d),a.cbu=t.cbu,a.rpp=t.rpp,a.direct=d}else o=t.companies,l=t.alias;if(!0===document.URL.endsWith("pricing")&&($("input:not(#field106380166)").removeClass("fsRequired"),$("input:not(#field106380166)").closest(".fsRow").addClass("fsHidden")),null===document.querySelector("#fsSubmissionCheckmark")){$(".fsForm").addClass("outfunnel-form"),$('.fsForm input[type="email"]').addClass("outfunnel-input-email"),$(".fsForm .fsNameFirst input").addClass("outfunnel-input-firstname"),$(".fsForm .fsNameLast input").addClass("outfunnel-input-lastname"),window.OFID="5fcba696beed351a6f2ea1d1",i=document.createElement("script"),f="https://cdn.outfunnel.com/c.js?v="+(new Date).toISOString().substring(0,10),i.setAttribute("src",f),document.getElementsByTagName("head")[0].appendChild(i);var c=window.location.href,f=new URL(c),m=f.searchParams.get("Employee")||f.searchParams.get("e"),p=!!f.searchParams.get("landing");m&&void 0!==$("[fs-field-validation-name=Employee] select option[value='"+m+"']").val()?$("[fs-field-validation-name=Employee] select").val(m):m?$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(m.toUpperCase())&&(m=this.text,$("[fs-field-validation-name=Employee] select").val(m))}):(m=window.location.pathname.replace("/",""),$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(m.toUpperCase())&&(m=this.text,$("[fs-field-validation-name=Employee] select").val(m))})),$("[fs-field-validation-name=Employee] select").trigger("change");var u=f.searchParams.get("uqd"),h=$('[fs-field-validation-name="LifeWorks Coupon Code"] input');h.change(function(){!1,u=$(this).val(),h.removeClass("correct invalid"),""!=u&&(h.val(u),$.ajax({type:"POST",url:"https://northamerica-northeast1-redwireless.cloudfunctions.net/sheets/coupons",data:{coupon:u},success:function(e,t,a){"available"===e.result?(!0,h.addClass("correct")):(!1,h.addClass("invalid"))}}))}),u&&h.length>0&&h.trigger("change");var v=$("[fs-field-validation-name=Company] input");v.length||(v=$("[fs-field-validation-name=Entreprise] input"));var g,w="OTHER (COMPANY NOT LISTED)",y=f.searchParams.get("Company")||f.searchParams.get("c")||f.searchParams.get("company");if(y){y=y.toUpperCase();var C=l.find(e=>e.alias.toLowerCase()===y.toLowerCase()),b="";C&&(b=C.alias),-1!==o.indexOf(y)?v.val(y):C?(v.val(C.name),y=C.name):v.val(w);let e=$('[data-company="'+encodeURI(y)+'"], [data-company="'+y+'"], [data-company="'+b+'"]');e.length&&(e.attr("src",e.attr("data-src")),e.show(),e.closest(".fsSection").addClass("company-image"))}else e.find("img:visible").attr("src",e.find("img:visible").attr("data-src"));$(".fsSubmitButton").on("mouseup",function(){-1===o.indexOf(v.val().toUpperCase())&&(setTimeout(()=>{v.closest(".fsRowBody").addClass("fsValidationError")},200),s=!1,r=$(this).val(),v.closest(".fsRowBody").find("button").trigger("click"),$('[fs-field-validation-name="pricing"] input').length>0&&$('[fs-field-validation-name="pricing"] input').val(""))}),v.autocomplete({delay:0,minLength:1e3,autoFocus:!0,source:function(e,t){var a=jQuery.ui.autocomplete.filter(o,e.term),n=new Fuse(o,{includeScore:!0,minMatchCharLength:3,threshold:.25,ignoreLocation:!0});let i=o.find(t=>{if(t.match(/\b([A-Z])/g).join("").trim()==e.term.trim())return!0});i&&(e.term=e.term+" | "+i),resultsOriginal=n.search(e.term),(0===(a=(a=resultsOriginal.map(e=>e.item.toUpperCase())).slice(0,20)).length||resultsOriginal[0].score>.025||a.length<3)&&a.push(w),t(a)},select:function(e,t){v.autocomplete("disable"),s=!0;var a=v.val().toUpperCase();$("[data-company]").hide();let n=$('[data-company="'+encodeURI(a)+'"], [data-company="'+a+'"]');n.length?(n.attr("src",n.attr("data-src")),n.show(),n.closest(".fsSection").addClass("company-image")):$(".fsSection").removeClass("company-image")},close:function(e,t){!1===document.URL.endsWith("pricing")&&v.autocomplete("option","minLength",1e3)}}),v.keypress(function(e){10!=e.which&&13!=e.which||(v.closest(".fsRowBody").find("button").trigger("click"),e.preventDefault()),13!==e.which&&!1===document.URL.endsWith("pricing")&&v.autocomplete("disable")}),v.closest(".fsRowBody").on("click","button",function(){v.autocomplete("enable"),v.autocomplete("option","minLength",3),v.autocomplete("search",v.val())}),!1===document.URL.endsWith("pricing")?v.autocomplete("disable"):v.autocomplete("option","minLength",1),v.after("<button type='button'>Search</button>"),v.attr("autocomplete","none");var R=jQuery.ajaxSettings.xhr;$.ajaxSettings.xhr=function(){return g=R()},$(".fsForm").on("submit",function(e){if(!1===s&&(e.preventDefault(),setTimeout(function(){$(".fsSubmitButton").val(r)},100)),"4270738"===n&&"SKIPTHEDISHES COURIER"!==(y=v.val().toUpperCase())&&(-1!==a.rpp.indexOf(y)?$('[fs-field-validation-name="pricing"] input').val("RPP PRICING"):-1!==a.cbu.indexOf(y)&&$('[fs-field-validation-name="pricing"] input').val("CBU PRICING")),!0===document.URL.endsWith("pricing")&&""!==v.val()&&""!==$('[fs-field-validation-name="pricing"] input').val())return e.preventDefault(),void(window.location.href="http://sellcell.formstack.com/forms/rpp?company="+v.val()+"&pricing="+$('[fs-field-validation-name="pricing"] input').val());if($("#thanks").length>0&&(v.val()===w||"SKIPTHEDISHES COURIER"===v.val()||-1!==a.direct.indexOf(v.val()))){e.preventDefault();var t=(o=$(this)).attr("action"),i="";m&&"Red Logistics"!==m&&(i="?Employee="+$("[fs-field-validation-name=Employee] select").val()),$.ajax({type:"POST",url:t,data:o.serialize(),success:function(e,t,n){"SKIPTHEDISHES COURIER"===v.val()?window.location.href="https://www.redwireless.ca/courier"+i:-1!==a.direct.indexOf(v.val())?window.location.href="https://www.redwireless.ca/direct"+i:window.location.href=g.responseURL},error:function(){"SKIPTHEDISHES COURIER"===v.val()?window.location.href="https://www.redwireless.ca/courier"+i:-1!==a.direct.indexOf(v.val())?window.location.href="https://www.redwireless.ca/direct"+i:window.location.href=g.responseURL}}),v.val()===w&&$("#thanks").modal(),setTimeout(function(){$(".fsSubmitButton").val("Loading Offers...").attr("disabled","disabled")},200)}if(p){e.preventDefault();var o;t=(o=$(this)).attr("action"),i="";m&&"Red Logistics"!==m&&(i="?Employee="+$("[fs-field-validation-name=Employee] select").val()),$.ajax({type:"POST",url:t,data:o.serialize(),success:function(e,t,a){E(g.responseURL)},error:function(){E(g.responseURL)}})}});var S=document.createElement("script");S.src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js",document.body.appendChild(S),openIframe=function(){var e=$(this).attr("alt"),t="";if(e){var a=e.split("--");a[1]&&(t="#googtrans(en|"+a[1].split(".")[0]+")")}$("<iframe src='https://sellcell.formstack.com/forms/referrals?Employee="+m+t+"'></iframe>").appendTo("body").modal()},$('.open-referrer, img[alt^="Refer-Friends-Banner"]').on("click",openIframe),$("#referrer-form").length>0&&($(".fsRow").each((e,t)=>{$(t).find('input[type="tel"]').length>0&&($("body").addClass("referrer"),$(t).addClass("friend"))}),$(".friend").slice(2).hide(),$(".friend:last").after('<button type="button" class="fsSubmitButton" id="add-friend">Add up to 4 more</button>'),$("#add-friend").on("click",function(){$(".friend:hidden:first").show(),0==$(".friend:hidden").length?($("#add-friend").attr("disabled",!0),$("#add-friend").attr("style","background: #ccc !important"),$("#add-friend").html("Only 5 friends can be referred")):$("#add-friend").html("Add up to "+$(".friend:hidden").length+" more")})),p&&($("body").addClass("landing"),$(".fsSubmitButton").val("Check if you Qualify"))}else setTimeout(function(){window.parent&&window.parent.closeModal()},2e3);function E(e){$(".fsPagination").after('<p style=" color: #dd2d1d; max-width: 536px; margin: auto; margin-top: 23px; font-weight: bold; ">Congratulations you qualified. You will be automatically redirected to secure page in few seconds. If this does not work <a href="'+e+'" target="_parent">click here</a></p>'),setTimeout(()=>{window.top.location.href=e},3e3)}})});
//# sourceMappingURL=app.min.js.map