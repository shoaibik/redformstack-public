$=null;var app={companies:[],formId:null,pricingPage:!1,lifeWorksForm:!1,skipForm:!1,vipForm:!1,preferredForm:!1,referralsForm:!1,bannerSection:null,formValid:!0,companyValid:!1,submitText:"Submit",couponVerified:!1,couponInput:null,employee:"",company:null,companyInput:null,notListed:"OTHER (COMPANY NOT LISTED)",URL:new URL(window.location.href),beforeInit:function(){window.jQuery||app.loadjQuery(),app.loadCompanies(),app.loadModal()},init:function(){$("form.fsForm").addClass("loading"),app.initFormType(),app.initPricingPage(),app.initRefereralForm(),app.initOutFunnel(),app.initCompany(),app.upperCaseInput(),app.initSkipForm(),app.initBanners(),!app.skipForm&&app.formId&&app.initCompanyAutocomplete(),app.initCoupon(),app.initEmployee(),app.initOnSubmit(),app.onLoad()},onLoad:function(){$("form.fsForm").removeClass("loading"),app.bannerSection.find("img").each(function(){$(this).attr("src",$(this).attr("data-src"))})},initFormType:function(){var e=$('form input[name="form"]').val();if(e)switch(app.formId=e.toString(),app.formId){case"4155515":app.skipForm=!0;break;case"4270738":app.lifeWorksForm=!0;break;case"4140040":app.vipForm=!0,app.loadGTranslate();break;case"4155425":app.preferredForm=!0;break;case"4168329":app.referralsForm=!0}},validateBeforeSubmit:function(){-1===app.companies.map(e=>e.c).indexOf(app.companyInput.val())&&app.companyInput.val()!==app.notListed?(app.formValid=!1,app.companyValid=!1,app.companyInput.closest(".fsRowBody").find("button").trigger("click"),$('[fs-field-validation-name="pricing"] input').length>0&&$('[fs-field-validation-name="pricing"] input').val("")):(app.formValid=!0,app.companyValid=!0)},initOnSubmit:function(){$(".fsForm").on("submit",function(e){app.formValid=!1;let a="";if(app.companyInput.val(app.companyInput.val().toUpperCase()),app.validateBeforeSubmit(),app.referralsForm&&(app.formValid=!0),!app.pricingPage&&!1===app.formValid)return e.preventDefault(),setTimeout(function(){$(".fsSubmitButton").val(app.submitText),console.log($(".fsSubmitButton"))},100),void(!1===app.companyValid&&(console.log("company invalid"),setTimeout(()=>{app.companyInput.closest(".fsRowBody").addClass("fsValidationError")},200)));var n=app.URL.searchParams.get("utm_source"),t=app.URL.searchParams.get("utm_term"),p=app.URL.searchParams.get("utm_medium"),o=app.URL.searchParams.get("utm_content"),i=app.URL.searchParams.get("utm_campaign");if(app.lifeWorksForm&&(t="LifeWorks"),n&&$('[fs-field-validation-name="Campaign Source"] input').val(n),t&&$('[fs-field-validation-name="Campaign Term"] input').val(t),p&&$('[fs-field-validation-name="Campaign Medium"] input').val(p),o&&$('[fs-field-validation-name="Campaign Content"] input').val(o),i&&$('[fs-field-validation-name="Campaign Name"] input').val(i),a=app.companyInput.val().toUpperCase(),app.lifeWorksForm&&(app.pricingPage||!1!==app.couponVerified||(e.preventDefault(),app.couponInput.closest(".fsRowBody").addClass("fsValidationError"),app.couponInput.focus(),setTimeout(function(){$(".fsSubmitButton").val(app.submitText)},100)),"SKIPTHEDISHES COURIER"!==a&&(app.isRPPCompany(a)?$('[fs-field-validation-name="pricing"] input').val("RPP PRICING"):app.isCBUCompany(a)&&$('[fs-field-validation-name="pricing"] input').val("CBU PRICING"))),app.pricingPage&&""!==a)return e.preventDefault(),void(window.location.href="http://sellcell.formstack.com/forms/rpp?company="+a+"&pricing="+$('[fs-field-validation-name="pricing"] input').val()+"&pricing-only=true");if($("#thanks").length>0&&!app.skipForm&&(console.log("submit 1"),a===app.notListed||"DOORDASH"===a||app.isDirectCompany(a)||app.preferredForm&&app.isCBUCompany(a))){e.preventDefault(),console.log("submit 2");var r,s=$(this),l=s.attr("action");app.employee&&"Red Logistics"!==app.employee&&(app.employee="?Employee="+$("[fs-field-validation-name=Employee] select").val());var c=jQuery.ajaxSettings.xhr;$.ajaxSettings.xhr=function(){return r=c()};var m=$('[fs-field-type="name"] .fsNameFirst input').val(),d=$('[fs-field-type="name"] .fsNameLast input').val(),f=$('[fs-field-type="phone"] input').val(),u=$('[fs-field-type="email"] input').val();$.ajax({type:"POST",url:l,data:s.serialize(),success:function(e,n,t){(app.vipForm||app.preferredForm||app.lifeWorksForm)&&a===app.notListed||app.preferredForm&&app.isCBUCompany(a)||(app.isDirectCompany(a)?window.location.href="https://www.redwireless.ca/direct"+app.employee:"DOORDASH"===a?window.location.href="https://dasherdeals.ca?Company="+a+"&name-first="+m+"&name-last="+d+"&contact_phone_number="+f+"&email="+u:r.responseURL?window.location.href=r.responseURL:window.location.href="https://sellcell.formstack.com/forms/rpp?Company="+a)},error:function(e,n,t){(app.vipForm||app.preferredForm||app.lifeWorksForm)&&a===app.notListed||app.preferredForm&&app.isCBUCompany(a)||(app.isDirectCompany(a)?window.location.href="https://www.redwireless.ca/direct"+app.employee:"DOORDASH"===a?window.location.href="https://dasherdeals.ca?Company="+a+"&name-first="+m+"&name-last="+d+"&contact_phone_number="+f+"&email="+u:r.responseURL?window.location.href=r.responseURL:window.location.href="https://sellcell.formstack.com/forms/rpp?Company="+a)}}),setTimeout(function(){$(".fsForm > .fsError:visible").length>0||(((app.vipForm||app.preferredForm||app.lifeWorksForm)&&a===app.notListed||app.preferredForm&&app.isCBUCompany(a))&&$("#thanks").modal(),$(".fsSubmitButton").val("Loading Offers...").attr("disabled","disabled"))},200)}})},initBanners:function(){app.bannerSection=$(".fsSection").first(),app.bannerSection.find(".fsRowBody img").each(function(){$(this).attr("data-src",$(this).attr("src")),$(this).attr("src","")});var e=!1;app.company&&$(".image-block").each(function(){-1!==$(this).find("img").attr("alt").indexOf("company-"+app.company.toLowerCase())&&(e=!0,$(this).show().find("img").show())}),e?$('img[alt="company-default"]').closest(".sqs-block.image-block").hide():($('img[alt^="company-"]').closest(".sqs-block.image-block").hide(),$('img[alt="company-default"]').show().closest(".sqs-block.image-block").show())},showDefaultBanner:function(){app.bannerSection.find("img:visible").attr("src",app.bannerSection.find("img:visible").attr("data-src"))},initPricingPage:function(){!0===app.URL.href.endsWith("pricing")&&(app.pricingPage=!0,$("input:not(#field106380166)").removeClass("fsRequired"),$("input:not(#field106380166)").closest(".fsRow").addClass("fsHidden"))},initSkipForm:function(){app.skipForm&&(app.companyInput.val("SKIPTHEDISHES COURIER"),app.companyInput.attr("readonly","readonly"))},initRefereralForm:function(){$('.open-referrer, img[alt^="Refer-Friends-Banner"]').on("click",app.openReferForm),app.referralsForm&&($(".fsRow").each((e,a)=>{$(a).find('input[type="tel"]').length>0&&($("body").addClass("referrer"),$(a).addClass("friend"))}),$(".friend").slice(2).hide(),$(".friend:last").after('<button type="button" class="fsSubmitButton" id="add-friend">Add up to 4 more</button>'),$("#add-friend").on("click",function(){$(".friend:hidden:first").show(),0==$(".friend:hidden").length?($("#add-friend").attr("disabled",!0),$("#add-friend").attr("style","background: #ccc !important"),$("#add-friend").html("Only 5 friends can be referred")):$("#add-friend").html("Add up to "+$(".friend:hidden").length+" more")}))},openReferForm:function(){var e=$(this).attr("alt"),a="";if(e){var n=e.split("--");n[1]&&(a="#googtrans(en|"+n[1].split(".")[0]+")")}$("<iframe src='https://sellcell.formstack.com/forms/referrals?Employee="+app.employee+a+"'></iframe>").appendTo("body").modal()},initOutFunnel:function(){var e,a;$(".fsForm").addClass("outfunnel-form"),$('.fsForm input[type="email"]').addClass("outfunnel-input-email"),$(".fsForm .fsNameFirst input").addClass("outfunnel-input-firstname"),$(".fsForm .fsNameLast input").addClass("outfunnel-input-lastname"),window.OFID="5fcba696beed351a6f2ea1d1",e=document.createElement("script"),a="https://cdn.outfunnel.com/c.js?v="+(new Date).toISOString().substring(0,10),e.setAttribute("src",a),document.getElementsByTagName("head")[0].appendChild(e)},initEmployee:function(){var e=app.URL.searchParams.get("Employee")||app.URL.searchParams.get("e");e&&void 0!==$("[fs-field-validation-name=Employee] select option[value='"+e+"']").val()?($("[fs-field-validation-name=Employee] select").val(e),app.employee=e):e?$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(e.toUpperCase())&&(e=this.text,$("[fs-field-validation-name=Employee] select").val(e),app.employee=e)}):(e=window.location.pathname.replace("/",""),$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(e.toUpperCase())&&(e=this.text,$("[fs-field-validation-name=Employee] select").val(e),app.employee=e)})),$("[fs-field-validation-name=Employee] select").trigger("change")},initCompany:function(){var e=app.URL.searchParams.get("Company")||app.URL.searchParams.get("c")||app.URL.searchParams.get("company"),a=$("[fs-field-validation-name=Company] input");if(a.length||(a=$("[fs-field-validation-name=Entreprise] input")),a.blur(function(){a.val(a.val().toUpperCase())}),app.companyInput=a,a.change(function(){setTimeout(()=>{$('[fs-field-validation-name="Company Logic"] select').val($(this).val())},100)}),e){e=e.toUpperCase(),app.company=e;var n=app.companies.find(a=>{if(!a.a)return!1;let n=a.a;return!!n.length&&-1!==n.indexOf(e)});-1!==app.companies.map(e=>e.c).indexOf(e)?a.val(e):n?(a.val(n.c),e=n.c):a.val(app.notListed);var t=['[data-company="'+encodeURI(e)+'"]','[data-company="'+e+'"]'];if(n){n.a.forEach(e=>{t.push('[data-company="'+encodeURI(e.toLowerCase())+'"]'),t.push('[data-company="'+encodeURI(e.toUpperCase())+'"]')})}let p=$(t.join(","));p.length&&(p.attr("src",p.attr("data-src")),p.show(),p.closest(".fsSection").addClass("company-image"))}else setTimeout(function(){app.showDefaultBanner()},1500)},upperCaseInput:function(){this.companyInput.on("keyup change",function(){this.value=this.value.toUpperCase()})},initCompanyAutocomplete:function(){var e=3,a=1e3;if(app.pricingPage){e=1;a=1}app.companyInput.autocomplete({delay:0,minLength:a,autoFocus:!0,source:function(a,n){var t=jQuery.ui.autocomplete.filter(app.companies,a.term);a.term=a.term.toUpperCase();let p=null;-1===a.term.indexOf("BC ")&&-1===a.term.indexOf(" BC")||(p=a.term.replace("BC","BRITISH COLUMBIA")),-1===a.term.indexOf("AB ")&&-1===a.term.indexOf(" AB")||(p=a.term.replace("AB","ALBERTA")),-1===a.term.indexOf("SK ")&&-1===a.term.indexOf(" SK")||(p=a.term.replace("SK","SASKATCHEWAN")),-1===a.term.indexOf("MB ")&&-1===a.term.indexOf(" MB")||(p=a.term.replace("MB","MANITOBA")),-1===a.term.indexOf("ON ")&&-1===a.term.indexOf(" ON")||(p=a.term.replace("ON","MANITOBA")),-1===a.term.indexOf("PEI ")&&-1===a.term.indexOf(" PEI")||(p=a.term.replace("PEI","PRINCE EDWARD ISLAND")),-1===a.term.indexOf("NS ")&&-1===a.term.indexOf(" NS")||(p=a.term.replace("NS","NOVA SCOTIA")),-1===a.term.indexOf("NFLD ")&&-1===a.term.indexOf(" NFLD")||(p=a.term.replace("NFLD","NEWFOUNDLAND"));var o=app.companies.find(e=>{if(!e.a)return!1;let n=e.a.map(e=>e);return!!n.length&&-1!==n.indexOf(a.term.trim())});o&&(a.term=a.term+" | "+o.c),p||(p=app.companies.find(e=>{if(e.c.match(/\b([A-Z])/g)&&e.c.match(/\b([A-Z])/g).join("").trim()==a.term.trim())return!0})),p&&(a.term=a.term+" | "+p);var i={includeScore:!0,minMatchCharLength:e,threshold:.25,useExtendedSearch:!1,ignoreLocation:!0,keys:["c","a"]};a.term.includes("|")&&(i.useExtendedSearch=!0);var r=new Fuse(app.companies,i);resultsOriginal=r.search(a.term),(0===(t=(t=resultsOriginal.map(e=>e.item.c.toUpperCase())).slice(0,20)).length||resultsOriginal[0].score>.025||t.length<3)&&t.push(app.notListed),n(t)},select:function(e,a){app.companyInput.autocomplete("disable"),app.formValid=!0;var n=app.companyInput.val().toUpperCase();(app.vipForm||app.preferredForm||app.lifeWorksForm)&&(a.item&&a.item.value===app.notListed?$('[fs-field-validation-name="Searched Company"] input').val(n):$('[fs-field-validation-name="Searched Company"] input').val("")),"SKIPTHEDISHES COURIER"!==n&&(app.isRPPCompany(a.item.value)?$('[fs-field-validation-name="pricing"] input').val("RPP PRICING"):app.isCBUCompany(a.item.value)&&$('[fs-field-validation-name="pricing"] input').val("CBU PRICING")),$("[data-company]").hide();let t=$('[data-company="'+encodeURI(a.item.value)+'"], [data-company="'+a.item.value+'"]');t.length?(t.attr("src",t.attr("data-src")),t.show(),t.closest(".fsSection").addClass("company-image")):$(".fsSection").removeClass("company-image")},focus:function(e,a){return!1},close:function(e,a){app.pricingPage||app.companyInput.autocomplete("option","minLength",1e3)}}),app.companyInput.keypress(function(e){10!=e.which&&13!=e.which||(app.companyInput.closest(".fsRowBody").find("button").trigger("click"),e.preventDefault()),13===e.which||app.pricingPage||app.companyInput.autocomplete("disable")}),app.companyInput.closest(".fsRowBody").on("click","button",function(){app.companyInput.autocomplete("enable"),app.companyInput.autocomplete("option","minLength",3),app.companyInput.autocomplete("search",app.companyInput.val())}),app.pricingPage?app.companyInput.autocomplete("option","minLength",1):app.companyInput.autocomplete("disable"),app.companyInput.after("<button type='button'>Search</button>"),app.companyInput.attr("autocomplete","none")},initCoupon:function(){var e=app.URL.searchParams.get("uqd");app.couponInput=$('[fs-field-validation-name="LifeWorks Coupon Code"] input'),app.couponInput.val(e),app.couponInput.change(function(){app.couponVerified=!1,""!=(e=$(this).val())&&(app.couponInput.removeClass("correct invalid").addClass("verifing"),$.ajax({type:"POST",url:"https://northamerica-northeast1-redwireless.cloudfunctions.net/sheets/coupons",data:{coupon:e},success:function(e,a,n){app.couponInput.removeClass("verifing"),"available"===e.result?(app.couponVerified=!0,app.couponInput.addClass("correct"),app.couponInput.closest(".fsRowBody").removeClass("fsValidationError")):(app.couponVerified=!1,app.couponInput.addClass("invalid"),app.couponInput.closest(".fsRowBody").addClass("fsValidationError"))}}))}),e&&app.couponInput.length>0&&app.couponInput.trigger("change")},loadCompanies:function(){$.ajax({url:"https://northamerica-northeast1-redwireless.cloudfunctions.net/companies"}).done(e=>{app.lifeWorksForm?app.companies=e.filter(e=>1===e.l):app.companies=e,app.init()})},isCBUCompany:function(e){let a=app.companies.find(a=>a.c===e);return!!a&&"CBU"===a.t},isRPPCompany:function(e){console.log(e);let a=app.companies.find(a=>a.c===e);return console.log(a),!!a&&"RPP"===a.t},isDirectCompany:function(e){let a=app.companies.find(a=>a.c===e);return!!a&&"Direct"===a.t},loadModal:function(){var e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js",document.body.appendChild(e)},loadjQuery:function(){var e=document.createElement("script");e.src="https://code.jquery.com/jquery-3.6.0.min.js",e.type="text/javascript",e.onload=function(){$=window.jQuery,app.companies.length>0&&app.init()},document.getElementsByTagName("head")[0].appendChild(e)},loadGTranslate:function(){$(".fsSection").first().prepend("<div id='google_translate_element2'></div>"),$(".fsSection").first().prepend('<div class="gflags"><a href="#" onclick="app.changeLanguage(\'en\');return false;" title="English" class="gflag nturl" style="background-position:-0px -0px;"><img src="//gtranslate.net/flags/blank.png" height="16" width="16" alt="English" /></a><a href="#" onclick="app.changeLanguage(\'fr\');return false;" title="French" class="gflag nturl" style="background-position:-200px -100px;"><img src="//gtranslate.net/flags/blank.png" height="16" width="16" alt="French" /></a></div>');var e=document.createElement("script");e.src="https://translate.google.com/translate_a/element.js?cb=app.googleTranslateElementInit2",e.type="text/javascript",e.onload=function(){},document.getElementsByTagName("head")[0].appendChild(e)},googleTranslateElementInit2:function(){new google.translate.TranslateElement({pageLanguage:"af",autoDisplay:!1},"google_translate_element2"),window.addEventListener("load",function(){app.URL.href.endsWith("offres")&&app.changeLanguage("fr"),app.URL.searchParams.get("lang")&&app.changeLanguage(app.URL.searchParams.get("lang"))})},changeLanguage:function(e){console.log("change language",e);for(var a=document.querySelector("#google_translate_element2 select"),n=0;n<a.children.length;n++){if(a.children[n].value==e){a.selectedIndex=n,a.dispatchEvent(new Event("change"));break}}}};document.addEventListener("DOMContentLoaded",function(){window.jQuery&&($=jQuery),app.beforeInit()});
//# sourceMappingURL=appv2.min.js.map