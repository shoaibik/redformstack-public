$=null;var app={companies:[],formId:null,pricingPage:!1,lifeWorksForm:!1,skipForm:!1,vipForm:!0,preferredForm:!0,referralsForm:!1,bannerSection:null,formValid:!0,companyValid:!1,submitText:"Submit",couponVerified:!1,couponInput:null,employee:"",company:null,companyInput:null,notListed:"OTHER (COMPANY NOT LISTED)",URL:new URL(window.location.href),beforeInit:function(){window.jQuery||app.loadjQuery(),app.loadCompanies(),app.loadModal()},init:function(){$("form.fsForm").addClass("loading"),app.initFormType(),app.initPricingPage(),app.initRefereralForm(),app.initOutFunnel(),app.initCompany(),app.initSkipForm(),app.initBanners(),app.skipForm||app.initCompanyAutocomplete(),app.initCoupon(),app.initEmployee(),app.initOnSubmit(),app.onLoad()},onLoad:function(){$("form.fsForm").removeClass("loading"),app.bannerSection.find("img").each(function(){$(this).attr("src",$(this).attr("data-src"))})},initFormType:function(){var a=$('form input[name="form"]').val();if(a)switch(app.formId=a.toString(),app.formId){case"4155515":app.skipForm=!0;break;case"4270738":app.lifeWorksForm=!0;break;case"4140040":app.vipForm=!0,app.loadGTranslate();break;case"4155425":app.preferredForm=!0;break;case"4168329":app.referralsForm=!0}},validateBeforeSubmit:function(){-1===app.companies.map(a=>a.c).indexOf(app.companyInput.val())&&app.companyInput.val()!==app.notListed?(app.formValid=!1,app.companyValid=!1,app.companyInput.closest(".fsRowBody").find("button").trigger("click"),$('[fs-field-validation-name="pricing"] input').length>0&&$('[fs-field-validation-name="pricing"] input').val("")):(app.formValid=!0,app.companyValid=!0)},initOnSubmit:function(){$(".fsForm").on("submit",function(a){if(app.formValid=!1,console.log("input",app.companyInput),app.companyInput.val(app.companyInput.val().toUpperCase()),console.log(app.companyInput.val()),app.validateBeforeSubmit(),app.referralsForm&&(app.formValid=!0),!app.pricingPage&&!1===app.formValid)return a.preventDefault(),setTimeout(function(){$(".fsSubmitButton").val(app.submitText),console.log($(".fsSubmitButton"))},100),void(!1===app.companyValid&&(console.log("company invalid"),setTimeout(()=>{app.companyInput.closest(".fsRowBody").addClass("fsValidationError")},200)));var e=app.URL.searchParams.get("utm_source"),n=app.URL.searchParams.get("utm_term"),p=app.URL.searchParams.get("utm_medium"),t=app.URL.searchParams.get("utm_content"),o=app.URL.searchParams.get("utm_campaign");if(app.lifeWorksForm&&(n="LifeWorks"),e&&$('[fs-field-validation-name="Campaign Source"] input').val(e),n&&$('[fs-field-validation-name="Campaign Term"] input').val(n),p&&$('[fs-field-validation-name="Campaign Medium"] input').val(p),t&&$('[fs-field-validation-name="Campaign Content"] input').val(t),o&&$('[fs-field-validation-name="Campaign Name"] input').val(o),app.lifeWorksForm&&(app.pricingPage||!1!==app.couponVerified||(a.preventDefault(),app.couponInput.closest(".fsRowBody").addClass("fsValidationError"),app.couponInput.focus(),setTimeout(function(){$(".fsSubmitButton").val(app.submitText)},100)),company=app.companyInput.val().toUpperCase(),"SKIPTHEDISHES COURIER"!==company&&(app.isRPPCompany(company)?$('[fs-field-validation-name="pricing"] input').val("RPP PRICING"):app.isCBUCompany(company)&&$('[fs-field-validation-name="pricing"] input').val("CBU PRICING"))),app.pricingPage&&""!==app.companyInput.val())return a.preventDefault(),void(window.location.href="http://sellcell.formstack.com/forms/rpp?company="+app.companyInput.val()+"&pricing="+$('[fs-field-validation-name="pricing"] input').val());if($("#thanks").length>0&&!app.skipForm&&(app.companyInput.val()===app.notListed||"SKIPTHEDISHES COURIER"===app.companyInput.val()||app.isDirectCompany(app.companyInput.val().toUpperCase()))){a.preventDefault();var i,r=$(this),l=r.attr("action");app.employee&&"Red Logistics"!==app.employee&&(app.employee="?Employee="+$("[fs-field-validation-name=Employee] select").val());var s=jQuery.ajaxSettings.xhr;$.ajaxSettings.xhr=function(){return i=s()},$.ajax({type:"POST",url:l,data:r.serialize(),success:function(a,e,n){(app.vipForm||app.preferredForm||app.lifeWorksForm)&&app.companyInput.val()===app.notListed||("SKIPTHEDISHES COURIER"===app.companyInput.val()?window.location.href="https://www.redwireless.ca/courier"+app.employee:app.isDirectCompany(app.companyInput.val())?window.location.href="https://www.redwireless.ca/direct"+app.employee:i.responseURL?window.location.href=i.responseURL:window.location.href="https://sellcell.formstack.com/forms/rpp?Company="+app.companyInput.val().toUpperCase())},error:function(a,e,n){(app.vipForm||app.preferredForm||app.lifeWorksForm)&&app.companyInput.val()===app.notListed||("SKIPTHEDISHES COURIER"===app.companyInput.val()?window.location.href="https://www.redwireless.ca/courier"+app.employee:app.isDirectCompany(app.companyInput.val())?window.location.href="https://www.redwireless.ca/direct"+app.employee:i.responseURL?window.location.href=i.responseURL:window.location.href="https://sellcell.formstack.com/forms/rpp?Company="+app.companyInput.val().toUpperCase())}}),setTimeout(function(){$(".fsForm > .fsError:visible").length>0||((app.vipForm||app.preferredForm||app.lifeWorksForm)&&app.companyInput.val()===app.notListed&&$("#thanks").modal(),$(".fsSubmitButton").val("Loading Offers...").attr("disabled","disabled"))},200)}})},initBanners:function(){app.bannerSection=$(".fsSection").first(),app.bannerSection.find(".fsRowBody img").each(function(){$(this).attr("data-src",$(this).attr("src")),$(this).attr("src","")});var a=!1;app.company&&$(".image-block").each(function(){-1!==$(this).find("img").attr("alt").indexOf("company-"+app.company.toLowerCase())&&(a=!0,$(this).show().find("img").show())}),a?$('img[alt="company-default"]').closest(".sqs-block.image-block").hide():($('img[alt^="company-"]').closest(".sqs-block.image-block").hide(),$('img[alt="company-default"]').show().closest(".sqs-block.image-block").show())},showDefaultBanner:function(){app.bannerSection.find("img:visible").attr("src",app.bannerSection.find("img:visible").attr("data-src"))},initPricingPage:function(){!0===app.URL.href.endsWith("pricing")&&(app.pricingPage=!0,$("input:not(#field106380166)").removeClass("fsRequired"),$("input:not(#field106380166)").closest(".fsRow").addClass("fsHidden"))},initSkipForm:function(){app.skipForm&&(app.companyInput.val("SKIPTHEDISHES COURIER"),app.companyInput.attr("readonly","readonly"))},initRefereralForm:function(){$('.open-referrer, img[alt^="Refer-Friends-Banner"]').on("click",app.openReferForm),app.referralsForm&&($(".fsRow").each((a,e)=>{$(e).find('input[type="tel"]').length>0&&($("body").addClass("referrer"),$(e).addClass("friend"))}),$(".friend").slice(2).hide(),$(".friend:last").after('<button type="button" class="fsSubmitButton" id="add-friend">Add up to 4 more</button>'),$("#add-friend").on("click",function(){$(".friend:hidden:first").show(),0==$(".friend:hidden").length?($("#add-friend").attr("disabled",!0),$("#add-friend").attr("style","background: #ccc !important"),$("#add-friend").html("Only 5 friends can be referred")):$("#add-friend").html("Add up to "+$(".friend:hidden").length+" more")}))},openReferForm:function(){var a=$(this).attr("alt"),e="";if(a){var n=a.split("--");n[1]&&(e="#googtrans(en|"+n[1].split(".")[0]+")")}$("<iframe src='https://sellcell.formstack.com/forms/referrals?Employee="+app.employee+e+"'></iframe>").appendTo("body").modal()},initOutFunnel:function(){var a,e;$(".fsForm").addClass("outfunnel-form"),$('.fsForm input[type="email"]').addClass("outfunnel-input-email"),$(".fsForm .fsNameFirst input").addClass("outfunnel-input-firstname"),$(".fsForm .fsNameLast input").addClass("outfunnel-input-lastname"),window.OFID="5fcba696beed351a6f2ea1d1",a=document.createElement("script"),e="https://cdn.outfunnel.com/c.js?v="+(new Date).toISOString().substring(0,10),a.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(a)},initEmployee:function(){var a=app.URL.searchParams.get("Employee")||app.URL.searchParams.get("e");a&&void 0!==$("[fs-field-validation-name=Employee] select option[value='"+a+"']").val()?($("[fs-field-validation-name=Employee] select").val(a),app.employee=a):a?$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(a.toUpperCase())&&(a=this.text,$("[fs-field-validation-name=Employee] select").val(a),app.employee=a)}):(a=window.location.pathname.replace("/",""),$("[fs-field-validation-name=Employee] select option").each(function(){-1!==this.text.toUpperCase().indexOf(a.toUpperCase())&&(a=this.text,$("[fs-field-validation-name=Employee] select").val(a),app.employee=a)})),$("[fs-field-validation-name=Employee] select").trigger("change")},initCompany:function(){var a=app.URL.searchParams.get("Company")||app.URL.searchParams.get("c")||app.URL.searchParams.get("company"),e=$("[fs-field-validation-name=Company] input");if(e.length||(e=$("[fs-field-validation-name=Entreprise] input")),e.blur(function(){e.val(e.val().toUpperCase())}),app.companyInput=e,a){a=a.toUpperCase(),app.company=a;var n=app.companies.find(e=>{if(!e.a)return!1;let n=e.a;return!!n.length&&-1!==n.indexOf(a)});-1!==app.companies.map(a=>a.c).indexOf(a)?e.val(a):n?(e.val(n.c),a=n.c):e.val(app.notListed);var p=['[data-company="'+encodeURI(a)+'"]','[data-company="'+a+'"]'];if(n){n.a.forEach(a=>{p.push('[data-company="'+encodeURI(a)+'"]')})}let t=$(p.join(",").toLowerCase());t.length&&(t.attr("src",t.attr("data-src")),t.show(),t.closest(".fsSection").addClass("company-image"))}else setTimeout(function(){app.showDefaultBanner()},1500)},initCompanyAutocomplete:function(){var a=3,e=1e3;if(app.pricingPage){a=1;e=1}app.companyInput.autocomplete({delay:0,minLength:e,autoFocus:!0,source:function(e,n){var p=jQuery.ui.autocomplete.filter(app.companies,e.term),t={includeScore:!0,minMatchCharLength:a,threshold:.25,useExtendedSearch:!0,ignoreLocation:!0,keys:["c","a"]},o=new Fuse(app.companies,t);e.term=e.term.toUpperCase();let i=null;-1===e.term.indexOf("BC ")&&-1===e.term.indexOf(" BC")||(i=e.term.replace("BC","BRITISH COLUMBIA")),-1===e.term.indexOf("AB ")&&-1===e.term.indexOf(" AB")||(i=e.term.replace("AB","ALBERTA")),-1===e.term.indexOf("SK ")&&-1===e.term.indexOf(" SK")||(i=e.term.replace("SK","SASKATCHEWAN")),-1===e.term.indexOf("MB ")&&-1===e.term.indexOf(" MB")||(i=e.term.replace("MB","MANITOBA")),-1===e.term.indexOf("ON ")&&-1===e.term.indexOf(" ON")||(i=e.term.replace("ON","MANITOBA")),-1===e.term.indexOf("PEI ")&&-1===e.term.indexOf(" PEI")||(i=e.term.replace("PEI","PRINCE EDWARD ISLAND")),-1===e.term.indexOf("NS ")&&-1===e.term.indexOf(" NS")||(i=e.term.replace("NS","NOVA SCOTIA")),-1===e.term.indexOf("NFLD ")&&-1===e.term.indexOf(" NFLD")||(i=e.term.replace("NFLD","NEWFOUNDLAND"));var r=app.companies.find(a=>{if(!a.a)return!1;let n=a.a.map(a=>a);return!!n.length&&-1!==n.indexOf(e.term.trim())});r&&(e.term=e.term+" | "+r.c),i||(i=app.companies.find(a=>{if(a.c.match(/\b([A-Z])/g)&&a.c.match(/\b([A-Z])/g).join("").trim()==e.term.trim())return!0})),i&&(e.term=e.term+" | "+i),console.log(e.term),resultsOriginal=o.search(e.term),(0===(p=(p=resultsOriginal.map(a=>a.item.c.toUpperCase())).slice(0,20)).length||resultsOriginal[0].score>.025||p.length<3)&&p.push(app.notListed),n(p)},select:function(a,e){app.companyInput.autocomplete("disable"),app.formValid=!0;var n=app.companyInput.val().toUpperCase();(app.vipForm||app.preferredForm||app.lifeWorksForm)&&(e.item&&e.item.value===app.notListed?$('[fs-field-validation-name="Searched Company"] input').val(n):$('[fs-field-validation-name="Searched Company"] input').val("")),"SKIPTHEDISHES COURIER"!==n&&(console.log(app.isRPPCompany(n)),app.isRPPCompany(n)?$('[fs-field-validation-name="pricing"] input').val("RPP PRICING"):app.isCBUCompany(n)&&$('[fs-field-validation-name="pricing"] input').val("CBU PRICING")),$("[data-company]").hide();let p=$('[data-company="'+encodeURI(n)+'"], [data-company="'+n+'"]');p.length?(p.attr("src",p.attr("data-src")),p.show(),p.closest(".fsSection").addClass("company-image")):$(".fsSection").removeClass("company-image")},focus:function(a,e){return!1},close:function(a,e){app.pricingPage||app.companyInput.autocomplete("option","minLength",1e3)}}),app.companyInput.keypress(function(a){10!=a.which&&13!=a.which||(app.companyInput.closest(".fsRowBody").find("button").trigger("click"),a.preventDefault()),13===a.which||app.pricingPage||app.companyInput.autocomplete("disable")}),app.companyInput.closest(".fsRowBody").on("click","button",function(){app.companyInput.autocomplete("enable"),app.companyInput.autocomplete("option","minLength",3),app.companyInput.autocomplete("search",app.companyInput.val())}),app.pricingPage?app.companyInput.autocomplete("option","minLength",1):app.companyInput.autocomplete("disable"),app.companyInput.after("<button type='button'>Search</button>"),app.companyInput.attr("autocomplete","none")},initCoupon:function(){var a=app.URL.searchParams.get("uqd");app.couponInput=$('[fs-field-validation-name="LifeWorks Coupon Code"] input'),app.couponInput.val(a),app.couponInput.change(function(){app.couponVerified=!1,""!=(a=$(this).val())&&(app.couponInput.removeClass("correct invalid").addClass("verifing"),$.ajax({type:"POST",url:"https://northamerica-northeast1-redwireless.cloudfunctions.net/sheets/coupons",data:{coupon:a},success:function(a,e,n){app.couponInput.removeClass("verifing"),"available"===a.result?(app.couponVerified=!0,app.couponInput.addClass("correct"),app.couponInput.closest(".fsRowBody").removeClass("fsValidationError")):(app.couponVerified=!1,app.couponInput.addClass("invalid"),app.couponInput.closest(".fsRowBody").addClass("fsValidationError"))}}))}),a&&app.couponInput.length>0&&app.couponInput.trigger("change")},loadCompanies:function(){$.ajax({url:"https://northamerica-northeast1-redwireless.cloudfunctions.net/companies"}).done(a=>{app.lifeWorksForm?app.companies=a.filter(a=>1===a.l):app.companies=a,app.init()})},isCBUCompany:function(a){let e=app.companies.find(e=>e.c===a);return!!e&&"CBU"===e.t},isRPPCompany:function(a){let e=app.companies.find(e=>e.c===a);return!!e&&(console.log(e),"RPP"===e.t)},isDirectCompany:function(a){let e=app.companies.find(e=>e.c===a);return!!e&&"Direct"===e.t},loadModal:function(){var a=document.createElement("script");a.src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js",document.body.appendChild(a)},loadjQuery:function(){var a=document.createElement("script");a.src="https://code.jquery.com/jquery-3.6.0.min.js",a.type="text/javascript",a.onload=function(){$=window.jQuery,app.companies.length>0&&app.init()},document.getElementsByTagName("head")[0].appendChild(a)},loadGTranslate:function(){$(".fsSection").first().prepend("<div id='google_translate_element2'></div>"),$(".fsSection").first().prepend('<div class="gflags"><a href="#" onclick="app.changeLanguage(\'en\');return false;" title="English" class="gflag nturl" style="background-position:-0px -0px;"><img src="//gtranslate.net/flags/blank.png" height="16" width="16" alt="English" /></a><a href="#" onclick="app.changeLanguage(\'fr\');return false;" title="French" class="gflag nturl" style="background-position:-200px -100px;"><img src="//gtranslate.net/flags/blank.png" height="16" width="16" alt="French" /></a></div>');var a=document.createElement("script");a.src="https://translate.google.com/translate_a/element.js?cb=app.googleTranslateElementInit2",a.type="text/javascript",a.onload=function(){},document.getElementsByTagName("head")[0].appendChild(a)},googleTranslateElementInit2:function(){new google.translate.TranslateElement({pageLanguage:"af",autoDisplay:!1},"google_translate_element2"),window.addEventListener("load",function(){app.URL.href.endsWith("offres")&&app.changeLanguage("fr"),app.URL.searchParams.get("lang")&&app.changeLanguage(app.URL.searchParams.get("lang"))})},changeLanguage:function(a){console.log("change language",a);for(var e=document.querySelector("#google_translate_element2 select"),n=0;n<e.children.length;n++){if(e.children[n].value==a){e.selectedIndex=n,e.dispatchEvent(new Event("change"));break}}}};document.addEventListener("DOMContentLoaded",function(){window.jQuery&&($=jQuery),app.beforeInit()});
//# sourceMappingURL=appv2.min.js.map